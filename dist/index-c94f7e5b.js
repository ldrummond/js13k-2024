let f={avatar:{x:172,y:7,w:8,h:8},bone:{x:66,y:7,w:7,h:19},book1:{x:354,y:0,w:12,h:15},book2:{x:366,y:0,w:12,h:15},book3:{x:378,y:0,w:12,h:15},book4:{x:390,y:0,w:12,h:15},book5:{x:341,y:0,w:13,h:14},brain:{x:402,y:0,w:13,h:11},"character 0":{x:33,y:0,w:33,h:54},"character 1":{x:0,y:0,w:33,h:55},claw:{x:326,y:0,w:15,h:13},eye:{x:161,y:7,w:11,h:7},foot:{x:116,y:7,w:9,h:10},horn:{x:99,y:7,w:8,h:13},iconCoin:{x:125,y:7,w:9,h:9},iconHormones:{x:152,y:7,w:9,h:9},iconHorn:{x:143,y:7,w:9,h:9},iconMuted:{x:73,
y:7,w:13,h:9},iconPlaying:{x:86,y:7,w:13,h:9},iconScroll:{x:134,y:7,w:9,h:9},kidney:{x:107,y:7,w:9,h:11},lungs:{x:299,y:0,w:15,h:23},minion:{x:180,y:7,w:7,h:7},note:{x:187,y:7,w:7,h:4},pituitary:{x:415,y:0,w:5,h:5},tail:{x:276,y:0,w:23,h:15},textAlt:{x:66,y:0,w:210,h:7},violin:{x:314,y:0,w:12,h:21}};function aa(a){return Math.round(Math.random()*a)}function m(a,c=10){let [d,b,e]=a;return`hsl(${d+(Math.random()-.5)*c},${b+(Math.random()-.5)*c}%,${e+(Math.random()-.5)*c}%)`}
function v(a){let c=a.cloneNode(),d=c.getContext("2d");d.drawImage(a,0,0);d.imageSmoothingEnabled=!1;return[c,d]}function w(a,c,d,b){(1>a.width||1>a.height)&&console.log("Failed to replace color");a=c.getImageData(0,0,a.width,a.height);let e=a.data;for(let g=0;g<e.length;g+=4)e.slice(g,g+3)+""==d+""&&(e[g]=b[0],e[g+1]=b[1],e[g+2]=b[2]);c.putImageData(a,0,0)}
function y(a,c,d,b,e,g,h=12,k,l,n){n=n||z;b=Math.ceil(b/n);e=Math.ceil(e/n);let r=k||1;l=l?l||1:0;let p=!k;p&&(a.fillStyle=m(g,0),a.fillRect(c||0,d||0,Math.ceil((b+1)*n),Math.ceil((e+1)*n)));for(let q=0;q<=b;q++)for(let t=0;t<=e;t++){let x=q<=r||q>=b-r||t<=r||t>=e-r;var u=q>=l&&q<=b-l&&t>=l&&t<=e-l;if(p||x&&u){u=.75<Math.random();let A=h;k&&(A=u?h:0);if(u||k&&x)a.fillStyle=m(g,A),a.fillRect(q*n+c,t*n+d,n,n)}}}function ba(a,c,d){var b=f.eye;a.drawImage(B,b.x,b.y,b.w,b.h,100*z,20*z,c,d)}
function C(a){let [c,d]=v(D),b=a.w,e=a.h;c.width=b;c.height=e;d.drawImage(B,a.x,a.y,a.w,a.h,0,0,b,e);return[c,d]}function ca(a){return E.find(c=>c.name==a)}Array.prototype.i=0;Array.prototype.next=function(){this.i=(this.i+1)%this.length;return this[this.i]};
let da=[0,0,1],F=[2,2,22],ea=[9,70,20],fa=[8,65,15],ha=[164,38,5],ia=[0,0,28],ja=[51,97,31],ma=[20,20,20],na=[100,100,100],oa=[3,3,3],pa=[255,255,255],qa=[150,150,150],H=[155,132,2],ra=[93,52,52],sa=[180,49,67],ta=[140,40,54],ua=[111,39,50],wa=1E3/30,xa=Math.sqrt(2),I=window.devicePixelRatio||1,ya=window.innerWidth,za=window.innerHeight,Aa=[392,329.63,293.66,246.94,220,196],B=document.createElement("img");B.src="spritesheet.png";
let Ba=12/9,[J,L]=ya/Ba>za?[za*Ba,za]:[ya,ya/Ba],z=J/300,M=3.5*L/24,Ca=21.75*L/24/z,N=(1*J/24+5)/z,Da=(25.5*J/24-N)/4/z,Ea=7*J/24,O=M+1.5*L/24,Fa=6.5*J/24,Ga=13*L/24,P=2.5*z,Q={start:"See that little runt? He just turned 13 and is starting puberty.",encourage:"He needs a bit of a nudge. Click the brain to get his hormones pumping.",brain_clicked:"Nice! Look at him squirm. Get more hormones and grow that pituitary.",kidney:"Hmm not sure what that does.",violin0:"What is this novel form of torture!?",
violin1:"Agh! The agony!",violin2:"What horrible sounds!",violin3:"Where did you get this evil device!?",violin4:"No amount of practice will be enough!",studies:"Shape the mind and the body."},D=document.createElement("canvas");D.width=ya;D.height=za;let [Ha,Ia]=v(D);Ha.id="loading";Ha.classList.add("fill");document.body.append(Ha);y(Ia,0,0,ya,za,da);let R=document.createElement("div");R.style.width=J+"px";R.style.height=L+"px";R.id="container";R.innerHTML='<div id="text"></div><div id="footer"></div>';
document.body.prepend(R);let [S,T]=v(D);S.id="main";R.append(S);S.width=J*I;S.height=L*I;T.scale(I,I);T.imageSmoothingEnabled=!1;document.documentElement.style.fontSize=4*z+"px";let [Ja]=v(S);var Ka="",La=void 0,Na=0,Oa=0,Pa=1,Qa="default",Ra=[],E=[],Sa=[],U;
let Ta={name:"hormones",type:0,V:f.iconHormones,J:"{",g:100,D:100,C:0,W:!1,X:()=>!0},Ua={name:"confidence",type:2,V:f.iconCoin,J:"}",g:0,D:10,C:0,W:!0,X:()=>!1},Va={name:"maturity",type:1,V:f.iconHorn,J:"|",g:0,D:20,C:0,W:!0,X:()=>!1},Wa={name:"knowledge",type:3,V:f.iconScroll,J:"~",g:0,D:4,C:0,W:!0,X:()=>!1},Xa=[Ta,Va,Ua,Wa],V={[0]:Ta,[1]:Va,[2]:Ua,[3]:Wa};
class ab{constructor(a,c,d,b){this.i=0;this.v=a;this.j=c;this.A=d;this.s=b;Sa.push(this)}R(a){0!=this.j&&(this.i+=a,a=Math.min(this.i/this.v,1),this.A&&this.A(a,this.j),this.i>=this.v&&(this.s&&this.s(this.j),this.j--,0!=this.j?this.i=0:this.cancel()))}cancel(){let a=Sa.indexOf(this);-1<a&&Sa.splice(a,1)}}
class bb{constructor(a){this.data={};let {id:c,x:d,y:b,w:e,T:g,l:h,ga:k,data:l}=a;this.id=c||aa(100)+"";this.data=l;let n=h[0];this.x=d*z;this.y=b*z;this.w=e*z;let r=this.w/n.w;this.i=n.h/n.w*this.w;this.H=h.map(p=>{let [u,q]=C(p);g&&(this.w*=2,this.w+=g*r,u.width*=2,u.width+=g);let t=p.x,x=p.y,A=p.w;p=p.h;a.T&&(q.drawImage(B,t,x,A,p,0,0,A,p),q.save(),q.scale(-1,1),q.translate(-u.width,0),q.drawImage(B,t,x,A,p,0,0,A,p),q.restore());return[u,q]}).map(p=>p[0]);this.da=this.H[0];k&&new ab(k,-1,void 0,
()=>{this.da=this.H.next()})}S(a){a.drawImage(this.da,this.x,this.y,this.w,this.i)}}let cb=Ja.getContext("2d",{la:!0});cb.scale(I,I);let db=Ja.getBoundingClientRect();Ja.id="hitmask";R.prepend(Ja);Ja.style.opacity="0";function eb(){let a=cb.getImageData((Na-db.left)*I,(Oa-db.top)*I,1,1).data;Ka=`rgb(${a[0]},${a[1]},${a[2]})`}
function fb(a){a.H.map(c=>{let [d,b]=v(c),e={};e.ia=c;b.globalCompositeOperation="source-over";b.fillStyle=a.Z;b.fillRect(0,0,a.w,a.i);b.globalCompositeOperation="destination-in";b.drawImage(c,0,0);var g=a.x,h=a.y,k=a.w,l=a.i;console.log("Add to hitmask");cb.drawImage(d,g,h,k,l);db=Ja.getBoundingClientRect();b.globalCompositeOperation="source-atop";b.drawImage(c,0,0);w(d,b,ra,ta);e.ca=v(d)[0];w(d,b,ta,ua);e.fa=v(d)[0];w(d,b,ta,ra);w(d,b,ra,pa);b.fillStyle="rgba(0,0,0,0.5)";b.fillRect(0,0,a.w,a.i);
e.ja=v(d)[0];b.globalCompositeOperation="source-over";b.drawImage(c,0,0);b.globalCompositeOperation="source-atop";b.fillStyle="rgba(0,0,0,0.4)";b.fillRect(0,0,a.w,a.i);e.ba=v(d)[0];b.fillStyle="rgba(0,0,0,0.7)";b.fillRect(0,0,a.w,a.i);e.ha=v(d)[0];b.drawImage(c,0,0);w(d,b,ra,ta);b.fillStyle="rgba(255,200,200,0.6)";b.fillRect(0,0,a.w,a.i);e.aa=v(d)[0];w(d,b,ta,ra);b.clearRect(0,0,a.w,a.i);b.globalCompositeOperation="source-over";b.drawImage(c,0,0);a.Y.push(e)})}
class gb extends bb{constructor(a){let {name:c,description:d,o:b,state:e,u:g,gain:h,B:k,N:l,I:n,m:r,hidden:p=!1,K:u}=a;super(r);this.Y=[];this.L=this.$=this.ea=0;this.v=this.K=this.j=this.M=this.A=!1;this.name=c;this.description=d;this.o=b;this.state=e;this.u=g;this.gain=h;"number"===typeof k&&0<k&&(this.B=k);this.O=l;this.I=n;this.m=r;this.Z=`rgb(${aa(255)},${aa(255)},${aa(255)})`;this.hidden=p;this.K=u;fb(this);this.F=this.Y[0]}U(){0===this.state&&(this.state=1);this.v=!0;setTimeout(()=>{this.v=
!1},150)}R(){var a=Date.now();let c=this.Z===Ka;!this.M&&c&&(this.$=a);this.M=c;let d=200<a-this.$;c&&0!==this.state&&(Qa="pointer",d&&this.name&&(La=this));if(this.u){let b=!1;Object.entries(this.u).map(e=>{let [g,h]=e;h.g&&V[g].g<h.g&&(b=!0);h.G&&V[g].C<h.G&&(b=!0)});this.A=b}this.s&&this.o&&(this.ea=(a-this.s)/this.o,a=1<this.ea,5===this.state&&a&&(this.state=1))}N(){let a=this.B&&this.L>=this.B;this.j||5===this.state||a||(this.j=!0,this.O&&this.O(),setTimeout(()=>{this.j=!1},160),1!==this.state||
this.A||a||(this.L+=1,this.o&&(this.s=Date.now(),this.state=5),this.u&&Object.entries(this.u).map(c=>{let [d,b]=c;V[d].g-=b.g||0;V[d].C-=b.G||0}),this.gain&&Object.entries(this.gain).map(c=>{let [d,b]=c;c=V[d];let e=b.g||0,g=b.G||0,h=b.D||0;c.g+=e;c.C+=g;c.D+=h;U&&hb(c,e,g,h)}),this.I&&this.I()))}S(a){if(!this.hidden){var c=this.F.ia,d=this.y,b=this.i,e=c.width,g=c.height,h=this.B&&this.L>=this.B;0===this.state||this.K?c=this.F.ha:this.v?c=this.F.aa:this.A?c=this.M?this.F.ja:this.F.ba:this.j?(d+=
2,c=this.F.aa):this.s&&this.o&&5===this.state?(a.drawImage(this.F.ba,this.x,d,this.w,b),h=Math.min((Date.now()-this.s-160)/(this.o-160),1),g*=h,b*=h):h?c=this.F.fa:this.M&&(c=this.F.ca);this.M&&this.K&&(c=this.F.ca);a.drawImage(c,0,0,e,g,this.x,d,this.w,b)}}}function ib(a){43==a&&(a=0);33==a&&(a=1);63==a&&(a=2);58==a&&(a=3);45<a&&58>a&&(a-=16);64<a&&91>a&&(a-=61);return a}
function jb(){var a=kb;console.log("Sprite Text Init Src: ",f.textAlt);let [c]=C(f.textAlt);console.log("Sprite Text Init: ",f.textAlt,c.width,c.height);a.i=c;a.O=C(f.iconHormones)[0];a.H=C(f.iconHorn)[0];a.s=C(f.iconCoin)[0];a.A=C(f.iconScroll)[0];a.v=C(f.eye)[0]}function lb(a,c){let d=""+c[0]+c[1]+c[2];if(a.j[d])return a.j[d];a.i?.width||console.log("Canvas not defined yet");let [b,e]=v(a.i);w(b,e,pa,c);return a.j[d]=b}
function W(a,c,d=0,b=0,e=10,g=.3,h,k,l){var n=kb;c=c.toUpperCase();d*=z;b*=z;e*=z;h=h?h*z:void 0;let r=g*e,p=0,u=0,q=1,t=n.i;k&&(t=lb(n,k));let x=Va.J.charCodeAt(0),A=Ua.J.charCodeAt(0),K=Wa.J.charCodeAt(0),rb=[Ta.J.charCodeAt(0),x,A,K,94],Ma=0;c.split("").map((G,va)=>{G=c.charCodeAt(va);va=32==G;let Ya=46==G,sb=63==G;var ka=58==G;let tb=rb.includes(G);if(33==G||Ya||ka)p-=.8*r;let ub=5*ib(G),Za=d+p,$a=b+u*e*2.5,vb=e,wb=7*e/5;ka=()=>a.drawImage(t,ub,0,5,7,Za,$a,vb,wb);if(tb){let la=n.O;G===x&&n.H&&
(la=n.H);G===A&&n.s&&(la=n.s);G===K&&n.A&&(la=n.A);94===G&&n.v&&(la=n.v);la&&(ka=()=>{a.drawImage(la,Za-3*r,$a-r,5.5*z,5.5*z)},p+=r)}va&&(ka=()=>{},p-=1.3*r,l&&(q-=l));p+=e+r;l?(q+=l,setTimeout(ka,q)):ka();h?va&&p>h&&(Ma+=p,p=0,u+=1):Ma=p;l&&(sb||Ya)&&(q+=5*l)});return Ma}class mb{constructor(){this.i=document.createElement("canvas");this.j={}}}let kb=new mb;
function hb(a,c,d,b){var e=U;let g=N+12+Xa.indexOf(a)*Da,h=Ca-14,k="";c&&(k+="+"+c+" ");d&&(k+=" +"+d+"/s");b&&(k+=" +"+b+"MAX");let l=g*z,n=(h-12)*z,r=60*z,p=20*z;new ab(1E3,1,u=>{let q=-10*u;e.i.clearRect(l,n,r,p);W(e.i,k,g+5,h+q,4.5,void 0,void 0,H);e.i.globalCompositeOperation="destination-out";e.i.fillStyle=`rgba(0, 0, 0, ${u})`;e.i.fillRect(l,n,r,p);e.i.globalCompositeOperation="source-over"})}
function nb(a){let c=178*z,d=33*z,b=114*z;var e=La;a.i.clearRect(c,d,b,27*z);if(e){let g=e.name+"",h=g.match("evil eye"),k=e.L,l=e.B,n=e.u;e=e.gain;l&&(g+=": ");W(a.i,g,c/z+3,d/z+3,2.7,.3,void 0,qa);l&&W(a.i,k+"/"+l,(c+b)/z-20,d/z+3,2.7,.3,void 0,k===l?sa:H);let r=d/z+13,p=c/z+3;W(a.i,"COST: ",p,r,3,.3,void 0,qa);let u=0;Object.entries(n||[]).map(([q,t])=>{q=Xa[q];let x=q?.J,A=t.g;t=t.G;let K;A&&(K=q.g>=A?H:sa,u+=W(a.i,`+${A} ${x}`,p+u,r+7,3,.3,void 0,K)/z);t&&(K=q.C>=t?H:sa,u+=W(a.i,`+${t}/s ${x}`,
p+u,r+7,3,.3,void 0,K)/z)});if(e){let q="";Object.entries(e).map(([t,x])=>{t=Xa[t]?.J;let A=x.g,K=x.G;x=x.D;A&&(q+=`+${A} ${t}`);K&&(q+=`+${K}/s ${t}`);x&&(q+=`+${x}:MAX ${t}`)});h&&(q="  ^evil eye");p+=60;W(a.i,"GAIN: ",p,r,3,.3,void 0,qa);W(a.i,q,p,r+7,3,.3,void 0,H)}}}
class ob{constructor(){this.s=!1;this.H=[];this.text="";document.getElementById("text");document.body.style.fontSize=J/64+"px";let [a,c]=v(S);a.id="ui";R.insertBefore(a,S);c.scale(I,I);c.imageSmoothingEnabled=!1;this.i=c;let [d,b]=v(S);this.A=d;d.width=20;d.height=20;y(b,0,0,20,20,ja,10,void 0,void 0,1);let [e]=v(this.A);this.O=e;y(b,0,0,20,20,F,10,void 0,void 0,1);let [g,h]=v(this.A);this.v=g;this.v.width=20;this.v.height=20;this.j=h;nb(this)}P(a){console.log("minion",a,this.s);this.s?this.H.push(a):
(console.log("typing start"),this.s=!0,setTimeout(()=>{console.log("typing end");this.s=!1},50*a.length+800),this.i.clearRect(30*z,7*z,400*z,17*z),W(this.i,a,34,13,2.7,.3,void 0,H,50))}R(){if(0<this.H.length&&!this.s){console.log("next minion text");let a=this.H.shift()+"";this.P(a)}nb(this)}S(a){Xa.map((c,d)=>{var b=22*z,e=Ca*z,g=e-b/2,h=c.g/c.D;d=(N-6.2+d*Da)*z;let k=this.v.width,l=k/xa,n=.8*l;this.j.clearRect(0,0,20,20);let r=20*h;h*=k;this.j.drawImage(this.O,0,20-r,20,r,0,k-h,k,h);this.j.save();
this.j.globalCompositeOperation="destination-in";this.j.translate(k/2,k/2);this.j.rotate(.785);this.j.fillRect(-n/2,-n/2,n,n);this.j.globalCompositeOperation="destination-over";this.j.fillStyle="red";this.j.drawImage(this.A,-l/2,-l/2,l,l);this.j.restore();this.i.drawImage(this.v,d,g,b,b);this.j.globalCompositeOperation="source-over";g=Math.floor(c.g);h="/"+c.D;b="+"+Math.floor(10*c.C)/10;d/=z;d+=25;e=e/z-2.5;d+=W(a,g+"",d,e,4,.15,void 0,0<g?H:na)/z;d+=1;d+=W(a,h,d,e,4,.15,void 0,na)/z;"knowledge"!==
c.name&&(c=0<c.C?H:na,d+=W(a,b,d+3,e+2.2,2.5,.1,void 0,c)/z,W(a,"/s",d+3.3,e+3.2,1.7,.5,void 0,c))})}}let X=new AudioContext;X.addEventListener("statechange",a=>{console.log(a)});X.createGain();
function pb(a){"suspended"===X.state&&X.resume();let c=.5*Pa,d=X.createOscillator();d.type="sawtooth";d.frequency.setValueAtTime(a,X.currentTime);a=X.createGain();a.gain.setValueAtTime(0,X.currentTime);a.gain.linearRampToValueAtTime(c,X.currentTime+.05);a.gain.exponentialRampToValueAtTime(.001,X.currentTime+1.5);d.connect(a);a.connect(X.destination);d.start(X.currentTime);d.stop(X.currentTime+1.5)}
function qb(){let [a,c]=v(S);R.append(a);a.id="end";c.scale(I,I);c.imageSmoothingEnabled=!1;let d=a.height/I/10,b=51*z;new ab(800,10,void 0,e=>{let g=10-e;0<g&&1<e&&y(c,0,d*(g-1),a.width,d*g,ea,10);1==e&&(ba(c,2*b,1.5*b),W(c,"Fear! A new demon has emerged from puberty and rises to torment the earth!",20,115,7,void 0,200,oa,70),setTimeout(()=>{W(c,"YOU WIN",125,200,6,void 0,200,oa)},5180))})}
let Y=1*J/24/z,Z=M/z,xb=(M+4.1*L/24)/z,yb=(M+11.2*L/24)/z,zb=[{name:"evil eye",state:1,u:{[0]:{g:100},[1]:{g:50},[3]:{g:4}},gain:{},I(){qb()},B:1,m:{x:Y+25,y:Z+5,w:19,l:[f.eye]}},{name:"grow pituitary",o:2E3,state:1,u:{[0]:{g:60}},gain:{[0]:{G:.5}},I(){if(this.u){let a=this.u[0];a?.g&&(a.g*=1.5);ca("form kidney")?.U();ca("sharpen horns")?.U()}},B:5,m:{x:Y+30,y:Z+50,w:10,l:[f.pituitary]}},{name:"form kidney",o:2E3,state:0,u:{[0]:{g:100}},gain:{[0]:{D:10}},I(){1==this.L&&U?.P(Q.kidney)},B:2,m:{x:Y+
5,y:Z+72,w:16,l:[f.kidney]}},{name:"work brain",o:800,state:1,gain:{[0]:{g:10}},I(){1==this.L&&U?.P(Q.brain_clicked)},m:{x:Y+23,y:Z+27,w:23,l:[f.brain]}},{name:"lungs",o:1E3,state:0,gain:{[0]:{g:10}},m:{x:Y+24,y:Z+68,w:24,l:[f.lungs]}},{name:"bones",o:1E3,state:0,gain:{[0]:{g:10}},m:{x:Y+53,y:Z+74,w:11.5,l:[f.bone]}},{name:"claws",o:2E3,state:0,gain:{[1]:{G:1}},N(){},m:{x:Y+5,y:Z+49,w:20,T:17,l:[f.claw]}},{name:"sharpen horns",o:5E3,state:0,u:{[0]:{g:120}},gain:{[1]:{G:.2}},I(){ca("play violin")?.U()},
m:{x:Y+4,y:Z+8,w:14,T:20,l:[f.horn]}},{name:"hooves",o:2E3,state:0,gain:{[1]:{G:1}},m:{x:Y+4,y:Z+129,w:17,T:15,l:[f.foot]}},{name:"tail",o:2E3,state:0,gain:{[1]:{G:1}},m:{x:Y+4,y:Z+99,w:39,l:[f.tail]}}],Ab=[],Bb=Array(6).fill(6).map(()=>aa(5));for(let a=0;6>a;a++){let c=a/6;for(let d=0;6>d;d++){let b=Aa[a];Ab.push({state:1,K:Bb[d]!==a,u:{[0]:{g:50},[1]:{g:20}},N(){pb(b);E.map(e=>{e?.data?.c==d&&(e.K=!0)});this.K=!1},m:{id:"note",x:213+d/6*70,y:xb+(1+28*c),w:9,l:[f.note],data:{c:d,r:a,ka:b}}})}}
let Cb=[{name:"play violin",o:2400,state:1,u:{},gain:{[2]:{g:1}},I(){var a=[Q.violin0,Q.violin1,Q.violin2,Q.violin3,Q.violin4];U?.P(a[Math.floor(Math.random()*a.length)]);let c=[];a=E.filter(d=>d.id.match("note")&&!d.K);for(let d=0;6>d;d++){let b=a.find(e=>e?.data?.c==d);b&&c.push(b)}new ab(400,6,void 0,d=>{(d=c[6-d])&&d.N()})},m:{x:180,y:xb,w:25,l:[f.violin]}},...Ab],Db=[{name:"codex gigas",state:1,B:1,u:{[0]:{g:200},[1]:{g:10},[2]:{g:5}},gain:{[0]:{G:2},[3]:{g:1}},m:{x:183,y:yb,w:17,l:[f.book1]}},
{name:"the black arts",state:0,B:1,gain:{[3]:{g:1}},m:{x:210,y:yb,w:17,l:[f.book2]}},{name:"Dantes Inferno",B:1,state:0,gain:{[3]:{g:1}},m:{x:237,y:yb,w:17,l:[f.book3]}},{name:"advice for a teenage devil",B:1,state:0,gain:{[3]:{g:1}},m:{x:263,y:yb,w:19,l:[f.book5]}},{state:1,N(){Pa=1-Pa;this.F=this.Y.next()},m:{x:275,y:11,w:10,l:[f.iconPlaying,f.iconMuted]}}],Eb=Ca-5,Fb=[{name:"Hormones",state:1,m:{x:N+0*Da,y:Eb,w:10,l:[f.iconHormones]}},{name:"Maturity",state:1,m:{x:N+Da,y:Eb,w:10,l:[f.iconHorn]}},
{name:"Confidence",state:1,m:{x:N+2*Da,y:Eb,w:10,l:[f.iconCoin]}},{name:"Knowledge",state:1,m:{x:N+3*Da,y:Eb,w:10,l:[f.iconScroll]}}],Gb=[...zb,...Cb,...Db,...Fb],Hb=[{x:16,y:10,w:10,l:[f.minion]},{x:98,y:1.25*O/z,w:60,l:[f["character 0"],f["character 1"]],ga:2E3}];
function Ib(){let [a,c]=v(D);a.id="page-background";document.body.prepend(a);y(c,0,0,ya,za,da,10);let [d,b]=v(S);d.id="background";b.scale(I,I);R.prepend(d);y(b,0,0,J,L,ha,8);var e=1*J/24,g=5.5*J/24,h=16*L/24;y(b,e,M,g,h,F,6);y(b,e,M,g,h,F,20,2);e=14*J/24;g=M+3.5*L/24;h=9*J/24;var k=6*L/24;y(b,e,g,h,k,F,8);y(b,e,g,h,k,ha,25,1,1);W(b,"The Band",1.22*e/z,.88*(g+k)/z,5,.83,void 0,ma);h=30*z;for(k=1;7>k;k++)b.fillStyle=m(da),b.fillRect(e+38*z,g+(10+k*h/6),67*z,z);e=14*J/24;g=M+10.25*L/24;h=9*J/24;k=5.75*
L/24;y(b,e,g,h,k,F,8);y(b,e,g,h,k,ha,25,1,1);W(b,"The Library",1.05*e/z,.91*(g+k)/z,5,.81,void 0,ma);y(b,Ea,O,Fa,Ga,fa);y(b,Ea+P,O+Ga-6*P,Fa-2*P,5.1*P,ia,20);y(b,Ea,O,Fa,Ga,F,5,2);y(b,Ea,O,Fa,Ga,ha,25,1,1);e=14*J/24;y(b,e,M,9*J/24,2.75*L/24,F,6);e+=6*z;g=M+9.5*z;k=100*z;h=Math.ceil(k/z);b.fillStyle=m(ha,0);b.fillRect(e,g,k,z);for(k=0;k<=h;k++).75<Math.random()&&(b.fillStyle=m(ha,12),b.fillRect(k*z+e,g,z,z))}B.onload=Jb;console.log("Load Spritesheet",B);
function Jb(){jb();Ib();console.log("Rendered Background");let a=new ob;U=a;setTimeout(()=>{W(Ia,"Infernal Adolescence",20,60,12,.12,void 0,sa,60)},100);Hb.map(b=>Ra.push(new bb(b)));Gb.map(b=>E.push(new gb(b)));document.addEventListener("mousemove",b=>{Na=b.x;Oa=b.y});console.log("After Initialized");document.getElementById("loading")?.remove();let c=document.getElementById("start");(function(){console.log("Start Function");c.remove();Ia.fillStyle="red";new ab(100,1,void 0,e=>{Ia.clearRect(0,0,Ha.width,
Ha.height*(1-e/1));1==e&&(U?.P(Q.start),U?.P(Q.encourage),Ha.remove())});window.addEventListener("click",()=>{E.find(e=>e.M)?.N()});let b=0;(function h(g){let k=g-b;k>=wa&&(b=g-k%wa,document.body.style.cursor=Qa,Qa="default",T.clearRect(0,0,J,L),a.R(),a.S(T),Ra.map(l=>l.S(T)),Xa.map(l=>{l.g+=l.C*k/1E3;l.g>l.D&&(l.g=l.D)}),La=void 0,E.map(l=>{l.R();l.S(T)}),Sa.map(l=>{l.R(k)}),T.fillStyle=d,T.globalCompositeOperation="darken",T.globalAlpha=.6,T.fillRect(Ea+P+2,O+P+2,Fa-2*P,Ga-2*P),T.globalCompositeOperation=
"source-over",T.globalAlpha=1,eb());requestAnimationFrame(h)})(0)})();let d=T.createLinearGradient(Ea+P,O+P,Fa-2*P,Ga-2*P);d.addColorStop(0,m(da,0));d.addColorStop(1,m(fa,0))};
