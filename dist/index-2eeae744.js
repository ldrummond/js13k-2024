let g={avatar:{x:172,y:7,w:8,h:8},bone:{x:66,y:7,w:7,h:19},book1:{x:354,y:0,w:12,h:15},book2:{x:366,y:0,w:12,h:15},book3:{x:378,y:0,w:12,h:15},book4:{x:390,y:0,w:12,h:15},book5:{x:341,y:0,w:13,h:14},brain:{x:402,y:0,w:13,h:11},"character 0":{x:33,y:0,w:33,h:54},"character 1":{x:0,y:0,w:33,h:55},claw:{x:326,y:0,w:15,h:13},eye:{x:161,y:7,w:11,h:7},foot:{x:116,y:7,w:9,h:10},horn:{x:99,y:7,w:8,h:13},iconCoin:{x:125,y:7,w:9,h:9},iconHormones:{x:152,y:7,w:9,h:9},iconHorn:{x:143,y:7,w:9,h:9},iconMuted:{x:73,
y:7,w:13,h:9},iconPlaying:{x:86,y:7,w:13,h:9},iconScroll:{x:134,y:7,w:9,h:9},kidney:{x:107,y:7,w:9,h:11},lungs:{x:299,y:0,w:15,h:23},minion:{x:180,y:7,w:7,h:7},note:{x:187,y:7,w:7,h:4},pituitary:{x:415,y:0,w:5,h:5},tail:{x:276,y:0,w:23,h:15},textAlt:{x:66,y:0,w:210,h:7},violin:{x:314,y:0,w:12,h:21}};function aa(a){return Math.round(Math.random()*a)}function ca(a){var c=da;let d=a[1]-c[1],b=a[2]-c[2];return 2>Math.abs(a[0]-c[0])&&2>Math.abs(d)&&2>Math.abs(b)}
function p(a,c=10){let [d,b,e]=a;return`hsl(${d+(Math.random()-.5)*c},${b+(Math.random()-.5)*c}%,${e+(Math.random()-.5)*c}%)`}function v(a){let c=a.cloneNode(),d=c.getContext("2d");d.drawImage(a,0,0);d.imageSmoothingEnabled=!1;return[c,d]}
function w(a,c,d,b){(1>a.width||1>a.height)&&console.log("Failed to replace color");a=c.getImageData(0,0,a.width,a.height);let e=a.data;for(let h=0;h<e.length;h+=4){let f=e.slice(h,h+3),k=f[1]-d[1],l=f[2]-d[2];3>Math.abs(f[0]-d[0])&&3>Math.abs(k)&&3>Math.abs(l)&&(e[h]=b[0],e[h+1]=b[1],e[h+2]=b[2])}c.putImageData(a,0,0)}
function x(a,c,d,b,e,h,f=12,k,l,m){m=m||y;b=Math.ceil(b/m);e=Math.ceil(e/m);let u=k||1;l=l?l||1:0;let n=!k;n&&(a.fillStyle=p(h,0),a.fillRect(c||0,d||0,Math.ceil((b+1)*m),Math.ceil((e+1)*m)));for(let q=0;q<=b;q++)for(let t=0;t<=e;t++){let B=q<=u||q>=b-u||t<=u||t>=e-u;var r=q>=l&&q<=b-l&&t>=l&&t<=e-l;if(n||B&&r){r=.75<Math.random();let z=f;k&&(z=r?f:0);if(r||k&&B)a.fillStyle=p(h,z),a.fillRect(q*m+c,t*m+d,m,m)}}}function ea(a,c,d){var b=g.eye;a.drawImage(fa,b.x,b.y,b.w,b.h,100*y,20*y,c,d)}
function A(a){let [c,d]=v(ha),b=a.w,e=a.h;c.width=b;c.height=e;d.drawImage(fa,a.x,a.y,a.w,a.h,0,0,b,e);return[c,d]}function C(a){return ia.find(c=>c.name==a)}Array.prototype.i=0;Array.prototype.next=function(){this.i=(this.i+1)%this.length;return this[this.i]};
let ja=[0,0,1],D=[2,2,22],ka=[9,70,20],la=[8,65,15],oa=[164,38,5],pa=[0,0,28],qa=[51,97,31],ra=[20,20,20],sa=[100,100,100],ta=[3,3,3],ua=[255,255,255],va=[150,150,150],E=[155,132,2],wa=[93,52,52],xa=[180,49,67],ya=[140,40,54],Aa=[111,39,50],Ba=1E3/30,Ca=Math.sqrt(2),F=window.devicePixelRatio||1,G=window.innerWidth,H=window.innerHeight,Da=[392,329.63,293.66,246.94,220,196],fa=document.createElement("img");fa.src="spritesheet.png";
let Ea=12/9,[J,K]=G/Ea>H?[H*Ea,H]:[G,G/Ea],y=J/300,L=3.5*K/24,Fa=21.75*K/24/y,M=(1*J/24+5)/y,Ga=(25.5*J/24-M)/4/y,Ha=7*J/24,N=L+1.5*K/24,Ia=6.5*J/24,Ja=13*K/24,O=2.5*y,P={start:"See that little runt? He just turned 13 and is starting puberty.",encourage:"He needs a bit of a nudge. Click the brain to get the hormones pumping.",brain_clicked:"Nice! Look at him squirm. Get more hormones and grow the pituitary.",jerk:"Good. hurry it up. we only have all of eternity.",claws:"Be careful! Those things are sharp.",
kidney:"Hmm not sure what that does.",violin0:"What is this novel form of torture!?",violin1:"Agh! The agony!",violin2:"What horrible sounds!",violin3:"Where did you get this evil device!?",violin4:"No amount of practice will be enough!",studies:"Keep studying. The devil is in the details. Hehe",advice:"Every devil keeps that in their back pocket."},ha=document.createElement("canvas");ha.width=G;ha.height=H;let [Ka,La]=v(ha);Ka.id="loading";Ka.classList.add("fill");document.body.append(Ka);
x(La,0,0,G,H,ja);let Q=document.createElement("div");Q.style.width=J+"px";Q.style.height=K+"px";Q.id="container";Q.innerHTML='<div id="text"></div><div id="footer"></div>';document.body.prepend(Q);let [R,S]=v(ha);R.id="main";Q.append(R);R.width=J*F;R.height=K*F;S.scale(F,F);S.imageSmoothingEnabled=!1;document.documentElement.style.fontSize=4*y+"px";let [T]=v(R);var da=[255,255,255],Ma=void 0,Na=0,Oa=0,U=1,Qa="default",Ra=[],ia=[],Sa=[],V;
let Ta={name:"hormones",type:0,Y:g.iconHormones,M:"{",g:40,s:100,H:0,Z:!1,$:()=>!0},Ua={name:"confidence",type:2,Y:g.iconCoin,M:"}",g:0,s:10,H:0,Z:!0,$:()=>!1},Va={name:"maturity",type:1,Y:g.iconHorn,M:"|",g:0,s:25,H:0,Z:!0,$:()=>!1},Wa={name:"knowledge",type:3,Y:g.iconScroll,M:"~",g:0,s:5,H:0,Z:!0,$:()=>!1},Xa=[Ta,Va,Ua,Wa],Ya={[0]:Ta,[1]:Va,[2]:Ua,[3]:Wa};
class Za{constructor(a,c,d,b){this.i=0;this.D=a;this.l=c;this.F=d;this.u=b;Sa.push(this)}U(a){0!=this.l&&(this.i+=a,a=Math.min(this.i/this.D,1),this.F&&this.F(a,this.l),this.i>=this.D&&(this.u&&this.u(this.l),this.l--,0!=this.l?this.i=0:this.cancel()))}cancel(){let a=Sa.indexOf(this);-1<a&&Sa.splice(a,1)}}
class $a{constructor(a){this.data={};let {id:c,x:d,y:b,w:e,W:h,m:f,ha:k,data:l}=a;this.id=c||aa(100)+"";this.data=l;let m=f[0];this.x=d*y;this.y=b*y;this.w=e*y;let u=this.w/m.w;this.i=m.h/m.w*this.w;this.J=f.map(n=>{let [r,q]=A(n);h&&(this.w*=2,this.w+=h*u,r.width*=2,r.width+=h);let t=n.x,B=n.y,z=n.w;n=n.h;a.W&&(q.drawImage(fa,t,B,z,n,0,0,z,n),q.save(),q.scale(-1,1),q.translate(-r.width,0),q.drawImage(fa,t,B,z,n,0,0,z,n),q.restore());return[r,q]}).map(n=>n[0]);this.X=this.J[0];k&&new Za(k,-1,void 0,
()=>{this.X=this.J.next()})}V(a){a.drawImage(this.X,this.x,this.y,this.w,this.i)}}let eb=T.getContext("2d",{ma:!0});eb.scale(F,F);let fb=T.getBoundingClientRect();window.addEventListener("resize",()=>{fb=T.getBoundingClientRect()});T.id="hitmask";Q.prepend(T);T.style.opacity="0";function gb(){let a=eb.getImageData((Na-fb.left)*F,(Oa-fb.top)*F,1,1).data;da=[a[0],a[1],a[2]]}
function hb(a){a.J.map(c=>{let [d,b]=v(c),e={};e.ja=c;b.globalCompositeOperation="source-over";b.fillStyle=`rgb(${a.l[0]},${a.l[1]},${a.l[2]})`;b.fillRect(0,0,a.w,a.i);b.globalCompositeOperation="destination-in";b.drawImage(c,0,0);eb.drawImage(d,a.x,a.y,a.w,a.i);fb=T.getBoundingClientRect();b.globalCompositeOperation="source-atop";b.drawImage(c,0,0);w(d,b,wa,ya);e.ea=v(d)[0];w(d,b,ya,Aa);e.ga=v(d)[0];w(d,b,ya,wa);w(d,b,wa,ua);b.fillStyle="rgba(0,0,0,0.5)";b.fillRect(0,0,a.w,a.i);e.ka=v(d)[0];b.globalCompositeOperation=
"source-over";b.drawImage(c,0,0);b.globalCompositeOperation="source-atop";b.fillStyle="rgba(0,0,0,0.4)";b.fillRect(0,0,a.w,a.i);e.da=v(d)[0];b.fillStyle="rgba(0,0,0,0.7)";b.fillRect(0,0,a.w,a.i);e.ia=v(d)[0];b.drawImage(c,0,0);w(d,b,wa,ya);b.fillStyle="rgba(255,200,200,0.6)";b.fillRect(0,0,a.w,a.i);e.ca=v(d)[0];w(d,b,ya,wa);b.clearRect(0,0,a.w,a.i);b.globalCompositeOperation="source-over";b.drawImage(c,0,0);a.aa.push(e)})}
class ib extends $a{constructor(a){let {name:c,description:d,B:b,state:e,j:h,gain:f,A:k,T:l,C:m,S:u,o:n,N:r,hidden:q=!1}=a;super(n);this.aa=[];this.K=this.ba=this.fa=0;this.R=this.N=this.u=this.P=this.F=!1;this.name=c;this.description=d;this.B=b;this.state=e;this.j=h;this.gain=f;"number"===typeof k&&0<k&&(this.A=k);this.O=l;this.C=m;this.S=u;this.o=n;this.l=[aa(255),aa(255),aa(255)];this.hidden=q;this.N=r;hb(this);this.I=this.aa[0]}G(){0===this.state&&(this.state=1);this.R=!0;setTimeout(()=>{this.R=
!1},250)}U(){var a=Date.now();let c=ca(this.l);!this.P&&c&&(this.ba=a);this.P=c;let d=200<a-this.ba;c&&0!==this.state&&(Qa="pointer",d&&this.name&&(Ma=this));if(this.j){let b=!1;Object.entries(this.j).map(e=>{let [h,f]=e;f.g&&Ya[h].g<f.g&&(b=!0);f.v&&Ya[h].H<f.v&&(b=!0)});this.F=b}this.D&&this.B&&(this.fa=(a-this.D)/this.B,a=1<this.fa,5===this.state&&a&&(this.state=1))}T(){let a=this.A&&this.K>=this.A;this.u||5===this.state||a||(this.u=!0,this.O&&this.O(),setTimeout(()=>{this.u=!1},160),1!==this.state||
this.F||a||(this.K+=1,this.S&&this.S(),this.B&&(this.D=Date.now(),this.state=5),this.j&&Object.entries(this.j).map(c=>{let [d,b]=c;Ya[d].g-=b.g||0;Ya[d].H-=b.v||0}),this.gain&&Object.entries(this.gain).map(c=>{let [d,b]=c;c=Ya[d];let e=b.g||0,h=b.v||0,f=b.s||0;c.g+=e;c.g=Math.min(c.g,c.s);c.H+=h;c.s+=f;V&&jb(c,e,h,f)}),this.C&&this.C()))}V(a){if(!this.hidden){var c=this.I.ja,d=this.y,b=this.i,e=c.width,h=c.height,f=this.A&&this.K>=this.A;0===this.state||this.N?c=this.I.ia:this.R?c=this.I.ca:this.u&&
5===this.state?(d+=2,c=this.I.ca):this.D&&this.B&&5===this.state?(a.drawImage(this.I.da,this.x,d,this.w,b),f=Math.min((Date.now()-this.D-160)/(this.B-160),1),h*=f,b*=f):this.F&&!f?c=this.P?this.I.ka:this.I.da:f?c=this.I.ga:this.P&&(c=this.I.ea);this.P&&this.N&&(c=this.I.ea);a.drawImage(c,0,0,e,h,this.x,d,this.w,b)}}}function kb(a){43==a&&(a=0);33==a&&(a=1);63==a&&(a=2);58==a&&(a=3);45<a&&58>a&&(a-=16);64<a&&91>a&&(a-=61);return a}
function lb(){var a=mb;let [c]=A(g.textAlt);a.i=c;a.O=A(g.iconHormones)[0];a.J=A(g.iconHorn)[0];a.u=A(g.iconCoin)[0];a.F=A(g.iconScroll)[0];a.D=A(g.eye)[0]}function nb(a,c){let d=""+c[0]+c[1]+c[2];if(a.l[d])return a.l[d];a.i?.width||console.log("Canvas not defined yet");let [b,e]=v(a.i);w(b,e,ua,c);return a.l[d]=b}
function W(a,c,d=0,b=0,e=10,h=.3,f,k,l){var m=mb;c=c.toUpperCase();d*=y;b*=y;e*=y;f=f?f*y:void 0;let u=h*e,n=0,r=0,q=1,t=m.i;k&&(t=nb(m,k));let B=Va.M.charCodeAt(0),z=Ua.M.charCodeAt(0),ba=Wa.M.charCodeAt(0),yb=[Ta.M.charCodeAt(0),B,z,ba,94],Pa=0;c.split("").map((I,za)=>{I=c.charCodeAt(za);za=32==I;let ab=46==I,zb=63==I;var ma=58==I;let bb=yb.includes(I);if(33==I||ab||ma||bb)n-=.85*u;let Ab=5*kb(I),cb=d+n,db=b+r*e*2.5,Bb=e,Cb=7*e/5;ma=()=>a.drawImage(t,Ab,0,5,7,cb,db,Bb,Cb);if(bb){let na=m.O;I===
B&&m.J&&(na=m.J);I===z&&m.u&&(na=m.u);I===ba&&m.F&&(na=m.F);94===I&&m.D&&(na=m.D);na&&(ma=()=>{a.drawImage(na,cb,db-u,5.5*y,5.5*y)},n+=3*u)}za&&(ma=()=>{},n-=1.3*u,l&&(q-=l));n+=e+u;l?(q+=l,setTimeout(ma,q)):ma();f?za&&n>f&&(Pa+=n,n=0,r+=1):Pa=n;l&&(zb||ab)&&(q+=5*l)});return Pa}class ob{constructor(){this.i=document.createElement("canvas");this.l={}}}let mb=new ob;
function jb(a,c,d,b){var e=V;let h=M+12+Xa.indexOf(a)*Ga,f=Fa-14,k="";c&&(k+="+"+c);d&&(k+=" +"+d+"/s");b&&(k+=" +"+b+"MAX");let l=h*y,m=(f-12)*y,u=150*y,n=25*y;new Za(1E3,1,r=>{let q=-10*r;e.u.clearRect(l,m,u,n);W(e.u,k,h+5,f+q,4.3,void 0,void 0,E);e.u.globalCompositeOperation="destination-out";e.u.fillStyle=`rgba(0, 0, 0, ${r})`;e.u.fillRect(l,m,u,n);e.u.globalCompositeOperation="source-over"})}
function pb(a){let c=178*y,d=33*y,b=114*y;var e=Ma;a.l.clearRect(c,d,b,27*y);if(e){let h=e.name+"",f=h.match("evil eye"),k=e.K,l=e.A,m=e.j;e=e.gain;l&&(h+=": ");W(a.l,h,c/y+3,d/y+3,2.7,.3,void 0,va);l&&W(a.l,k+"/"+l,(c+b)/y-20,d/y+3,2.7,.3,void 0,k===l?xa:E);let u=d/y+13,n=c/y+3;if(m||e){W(a.l,"COST: ",n,u,3,.2,void 0,va);let r=0;Object.entries(m||[]).map(([q,t])=>{q=Xa[q];var B=q?.M;let z=t.g&&Math.round(t.g);t=t.v;let ba;z&&(ba=q.g>=z?E:xa,r+=W(a.l,`${z}${B} `,n+r,u+7,3,.2,void 0,ba)/y);t&&(B=`-${(t.toFixed(1)+
"").replace(/0(\.\d+)/,"$1")}/s${B} `,ba=q.H>=t?E:xa,r+=W(a.l,B,n+r,u+7,3,.2,void 0,ba)/y)})}if(e){let r="";Object.entries(e).map(([q,t])=>{q=Xa[q]?.M;let B=t.g,z=t.v;t=t.s;B&&(r+=`+${B}${q}`);z&&(r+=`+${(z.toFixed(1)+"").replace(/0(\.\d+)/,"$1")}/s${q}`);t&&(r+=`+${t}${q}MAX`)});f&&(r="^ evil eye");n+=60;W(a.l,"GAIN: ",n,u,3,.2,void 0,va);W(a.l,r,n,u+7,3,.2,void 0,E)}}}
class qb{constructor(){this.F=!1;this.O=[];this.text="";document.getElementById("text");document.body.style.fontSize=J/64+"px";let [a,c]=v(R);a.id="ui";Q.insertBefore(a,R);c.scale(F,F);c.imageSmoothingEnabled=!1;this.l=c;let [d,b]=v(R);d.id="tooltip";Q.append(d);b.scale(F,F);b.imageSmoothingEnabled=!1;this.u=b;let [e,h]=v(R);this.J=e;e.width=20;e.height=20;x(h,0,0,20,20,qa,10,void 0,void 0,1);let [f]=v(this.J);this.X=f;x(h,0,0,20,20,D,10,void 0,void 0,1);let [k,l]=v(this.J);this.D=k;this.D.width=
20;this.D.height=20;this.i=l;pb(this)}L(a){this.F?this.O.push(a):(this.F=!0,setTimeout(()=>{this.F=!1},50*a.length+800),this.l.clearRect(30*y,7*y,400*y,17*y),W(this.l,a,34,13,2.7,.3,void 0,E,50))}U(){if(0<this.O.length&&!this.F){let a=this.O.shift()+"";this.L(a)}pb(this)}V(a){Xa.map((c,d)=>{var b=22*y,e=Fa*y,h=e-b/2,f=c.g/c.s;d=(M-6.2+d*Ga)*y;let k=this.D.width,l=k/Ca,m=.8*l;this.i.clearRect(0,0,20,20);let u=20*f;f*=k;this.i.drawImage(this.X,0,20-u,20,u,0,k-f,k,f);this.i.save();this.i.globalCompositeOperation=
"destination-in";this.i.translate(k/2,k/2);this.i.rotate(.785);this.i.fillRect(-m/2,-m/2,m,m);this.i.globalCompositeOperation="destination-over";this.i.fillStyle="red";this.i.drawImage(this.J,-l/2,-l/2,l,l);this.i.restore();this.l.drawImage(this.D,d,h,b,b);this.i.globalCompositeOperation="source-over";h=Math.floor(c.g);f="/"+c.s;b="+"+Math.floor(10*c.H)/10;d/=y;d+=25;e=e/y-2.5;d+=W(a,h+"",d,e,4,.15,void 0,0<h?E:sa)/y;d+=1;d+=W(a,f,d,e,4,.15,void 0,sa)/y;"knowledge"!==c.name&&(c=0<c.H?E:sa,d+=W(a,
b,d+3,e+2.2,2.5,.1,void 0,c)/y,W(a,"/s",d+3.3,e+3.2,1.7,.5,void 0,c))})}}
let rb=new AudioContext,sb={C_major:[261.63,329.63,392],G_major:[196,246.94,392],F_major:[174.61,220,349.23],A_minor:[220,261.63,329.63],D_minor:[293.66,349.23,440],B_diminished:[246.94,311.13,392],D_major:[146.83,185,220],E_major:[164.81,207.65,246.94],C_minor:[130.81,155.56,196],F_minor:[174.61,207.65,261.63],G7:[196,246.94,293.66],Cmaj7:[130.81,164.81,196],E_diminished:[164.81,207.65,246.94],G_minor:[196,233.08,293.66],ultra_low:[10,20.6,10],ultra_high:[4186.01,5274.04,6271.93]};
function tb(a){let c=0;setInterval(()=>{ub(a[c],2,.008,1);c=(c+1)%a.length},2E3)}function vb(){"suspended"===rb.state&&rb.resume();let a="E_diminished A_minor E_diminished F_minor E_diminished G_minor E_diminished C_minor".split(" ").map(c=>sb[c]);tb(a)}
function ub(a,c,d,b){let e=rb.currentTime;d*=U;a.map(h=>{let f=rb.createOscillator(),k=rb.createGain();f.type="sine";f.frequency.setValueAtTime(h,e);k.gain.setValueAtTime(d,e);k.gain.linearRampToValueAtTime(0,e+b);f.connect(k);k.connect(rb.destination);f.start(e);f.stop(e+c);f.onended=()=>{f.disconnect();k.disconnect()}})}function wb(){ub(sb.C_minor,2,.02*U,1)}function xb(){ub(sb.E_diminished,1,.01*U,1)}let X=new AudioContext;
function Db(a){"suspended"===X.state&&X.resume();let c=.02*U,d=X.createOscillator();d.type="sawtooth";d.frequency.setValueAtTime(a,X.currentTime);a=X.createGain();a.gain.setValueAtTime(0,X.currentTime);a.gain.linearRampToValueAtTime(c,X.currentTime+.05);a.gain.exponentialRampToValueAtTime(.001,X.currentTime+1.5);d.connect(a);a.connect(X.destination);d.start(X.currentTime);d.stop(X.currentTime+1.5)}
function Eb(){let [a,c]=v(R);Q.append(a);a.id="end";c.scale(F,F);c.imageSmoothingEnabled=!1;let d=a.height/F/10,b=51*y;new Za(800,10,void 0,e=>{let h=10-e;0<h&&1<e&&x(c,0,d*(h-1),a.width,d*h,ka,10);1==e&&(ea(c,2*b,1.5*b),W(c,"Fear! A new demon has emerged from puberty and risen to torment the earth!",20,115,7,void 0,200,ta,70),setTimeout(()=>{W(c,"YOU WIN: AND WE LOSE",100,200,6,void 0,200,ta)},5180))})}
let Y=1*J/24/y,Z=L/y,Fb=(L+4.1*K/24)/y,Gb=(L+11.2*K/24)/y,Hb=[{name:"evil eye",state:1,j:{[0]:{g:300},[1]:{g:60},[2]:{g:25},[3]:{g:5}},gain:{},C(){ub(sb.E_diminished,5,.03*U,4);Eb()},A:1,o:{x:Y+25,y:Z+5,w:19,m:[g.eye]}},{name:"grow pituitary",B:2E3,state:1,j:{[0]:{g:60}},gain:{[0]:{v:.5,s:5}},C(){if(this.j){let a=this.j[0];a?.g&&(a.g+=35)}1==this.K&&(V?.L(P.jerk),C("form kidney")?.G(),C("sharpen horns")?.G())},A:6,o:{x:Y+30,y:Z+50,w:10,m:[g.pituitary]}},{name:"form kidney",B:2E3,state:0,j:{[0]:{g:100}},
gain:{[0]:{s:10}},C(){if(this.j){let a=this.j[0];a?.g&&(a.g+=10)}1==this.K&&V?.L(P.kidney)},A:2,o:{x:Y+5,y:Z+72,w:16,m:[g.kidney]}},{name:"develop brain",B:800,state:1,gain:{[0]:{g:9}},C(){1==this.K&&V?.L(P.brain_clicked)},o:{x:Y+23,y:Z+27,w:23,m:[g.brain]}},{name:"lungs",B:1E3,state:0,j:{[0]:{g:50}},gain:{[1]:{g:2},[2]:{g:.5}},o:{x:Y+24,y:Z+68,w:24,m:[g.lungs]}},{name:"growth spurt",B:12E3,A:6,state:0,j:{[1]:{g:20},[2]:{g:2}},gain:{[0]:{s:10},[1]:{s:5}},C(){if(this.j){var a=this.j[1];a?.g&&(a.g+=
5);a=this.j[2];a?.g&&(a.g+=2)}},o:{x:Y+53,y:Z+74,w:11.5,m:[g.bone]}},{name:"grow claws",B:2E3,state:0,A:3,j:{[0]:{g:120,v:.1},[1]:{g:20}},gain:{[1]:{v:.6}},C(){1==this.K&&(V?.L(P.claws),C("practice violin")?.G());if(this.j){let a=this.j[0],c=this.j[1];a?.v&&(a.v+=.1);c?.g&&(c.g+=5)}},o:{x:Y+5,y:Z+49,w:20,W:17,m:[g.claw]}},{name:"sharpen horns",B:5E3,state:0,j:{[0]:{g:120}},gain:{[1]:{v:.2}},C(){1==this.K&&(C("grow claws")?.G(),C("shape hooves")?.G())},o:{x:Y+4,y:Z+8,w:14,W:20,m:[g.horn]}},{name:"shape hooves",
B:2E3,state:0,j:{[0]:{g:90},[1]:{g:25},[2]:{g:5}},gain:{[0]:{s:50},[1]:{s:5}},A:2,C(){},o:{x:Y+4,y:Z+129,w:17,W:15,m:[g.foot]}},{name:"grow tail",B:9E3,state:0,A:3,j:{[0]:{g:200},[1]:{v:.5},[2]:{g:5}},gain:{[2]:{v:.1,s:2}},o:{x:Y+4,y:Z+99,w:39,m:[g.tail]}}];Hb.map(a=>{a.S=wb});let Ib=[],Jb=Array(6).fill(6).map(()=>aa(5));
for(let a=0;6>a;a++){let c=a/6;for(let d=0;6>d;d++){let b=Da[a];Ib.push({state:1,N:Jb[d]!==a,T(){Db(b);ia.map(e=>{e?.data?.c==d&&(e.N=!0)});this.N=!1;this.R=!0;setTimeout(()=>{this.R=!1},111)},o:{id:"note",x:213+d/6*70,y:Fb+(1+28*c),w:9,m:[g.note],data:{c:d,r:a,la:b}}})}}
let Kb=[{name:"practice violin",B:2400,state:0,j:{[0]:{g:50},[1]:{v:.2,g:25}},gain:{[2]:{g:1}},C(){var a=[P.violin0,P.violin1,P.violin2,P.violin3,P.violin4];V?.L(a[Math.floor(Math.random()*a.length)]);let c=[];a=ia.filter(d=>d.id.match("note")&&!d.N);for(let d=0;6>d;d++){let b=a.find(e=>e?.data?.c==d);b&&c.push(b)}new Za(400,6,void 0,d=>{(d=c[6-d])&&d.T()})},o:{x:180,y:Fb,w:25,m:[g.violin]}},...Ib],Lb=[{name:"codex gigas",state:1,A:1,j:{[0]:{g:150},[1]:{g:15},[2]:{g:5}},gain:{[0]:{v:2},[3]:{g:1}},
C(){C("lungs")?.G();C("the black arts")?.G();C("growth spurt")?.G();V?.L(P.studies)},o:{x:183,y:Gb,w:17,m:[g.book1]}},{name:"the black arts",state:0,A:1,j:{[0]:{g:220},[1]:{g:30},[2]:{g:6}},gain:{[2]:{v:.2},[3]:{g:1}},C(){C("dantes inferno")?.G();C("grow tail")?.G()},o:{x:210,y:Gb,w:17,m:[g.book2]}},{name:"dantes inferno",A:1,state:0,j:{[0]:{g:250},[1]:{g:30},[2]:{g:15}},gain:{[2]:{s:10},[3]:{g:1}},C(){C("advice for a teenage devil")?.G()},o:{x:237,y:Gb,w:17,m:[g.book3]}},{name:"advice for a teenage devil",
A:1,state:0,j:{[0]:{g:290},[1]:{g:50},[2]:{g:25}},gain:{[3]:{g:2}},C(){C("evil eye")?.G();V?.L(P.advice)},o:{x:263,y:Gb,w:19,m:[g.book5]}},{name:"MUTE",state:1,T(){U=1-U;this.I=this.aa.next();0===U?this.name="UNMUTE":this.name="MUTE"},o:{x:275,y:11,w:10,m:[g.iconPlaying,g.iconMuted]}}];Lb.map(a=>{a.S=xb});
let Mb=Fa-5,Nb=[{name:"Hormones",state:1,o:{x:M+0*Ga,y:Mb,w:10,m:[g.iconHormones]}},{name:"Maturity",state:1,o:{x:M+Ga,y:Mb,w:10,m:[g.iconHorn]}},{name:"Confidence",state:1,o:{x:M+2*Ga,y:Mb,w:10,m:[g.iconCoin]}},{name:"Knowledge",state:1,o:{x:M+3*Ga,y:Mb,w:10,m:[g.iconScroll]}}],Ob=[...Hb,...Kb,...Lb,...Nb],Pb=[{x:16,y:10,w:10,m:[g.minion]},{x:98,y:1.25*N/y,w:60,m:[g["character 0"],g["character 1"]],ha:2E3}];
function Qb(){let [a,c]=v(ha);a.id="page-background";a.classList.add("fill");document.body.prepend(a);x(c,0,0,G,H,ja,10);let [d,b]=v(R);d.id="background";b.scale(F,F);Q.prepend(d);x(b,0,0,J,K,oa,8);var e=1*J/24,h=5.5*J/24,f=16*K/24;x(b,e,L,h,f,D,6);x(b,e,L,h,f,D,20,2);e=14*J/24;h=L+3.5*K/24;f=9*J/24;var k=6*K/24;x(b,e,h,f,k,D,8);x(b,e,h,f,k,oa,25,1,1);W(b,"The Band",1.22*e/y,.88*(h+k)/y,5,.83,void 0,ra);f=30*y;for(k=1;7>k;k++)b.fillStyle=p(ja),b.fillRect(e+38*y,h+(10+k*f/6),67*y,y);e=14*J/24;h=L+
10.25*K/24;f=9*J/24;k=5.75*K/24;x(b,e,h,f,k,D,8);x(b,e,h,f,k,oa,25,1,1);W(b,"The Library",1.05*e/y,.91*(h+k)/y,5,.81,void 0,ra);x(b,Ha,N,Ia,Ja,la);x(b,Ha+O,N+Ja-6*O,Ia-2*O,5.1*O,pa,20);x(b,Ha,N,Ia,Ja,D,5,2);x(b,Ha,N,Ia,Ja,oa,25,1,1);e=14*J/24;x(b,e,L,9*J/24,2.75*K/24,D,6);e+=6*y;h=L+9.5*y;k=100*y;f=Math.ceil(k/y);b.fillStyle=p(oa,0);b.fillRect(e,h,k,y);for(k=0;k<=f;k++).75<Math.random()&&(b.fillStyle=p(oa,12),b.fillRect(k*y+e,h,y,y))}fa.onload=Rb;
function Sb(){return new Promise(a=>{setTimeout(a,300)})}
async function Rb(){function a(){let b=S.createLinearGradient(Ha+O,N+O,Ia-2*O,Ja-2*O);b.addColorStop(0,p(ja,0));b.addColorStop(1,p(la,0));S.fillStyle=b;S.globalCompositeOperation="darken";S.globalAlpha=.5;S.fillRect(Ha+O+2,N+O+2,Ia-2*O,Ja-2*O);S.globalCompositeOperation="source-over";S.globalAlpha=1}lb();Qb();let c=new qb;V=c;await Sb();setTimeout(()=>{Pb.map(b=>Ra.push(new $a(b)));Ob.map((b,e)=>{setTimeout(()=>{ia.push(new ib(b))},60*e)})},333);document.body.addEventListener("mousemove",b=>{Na=b.pageX;
Oa=b.pageY});document.getElementById("loading")?.remove();let d=document.getElementById("start");W(La,"Infernal Adolescence",G/2/y-134.4,H/4/y,12,.12,void 0,xa,80);setTimeout(()=>{d.style.opacity="1"},1800);d.addEventListener("click",function(){d.remove();La.fillStyle="red";new Za(100,30,void 0,e=>{La.clearRect(0,0,Ka.width,Ka.height*(1-e/30));1==e&&(V?.L(P.start),V?.L(P.encourage),Ka.remove())});vb();window.addEventListener("click",()=>{ia.find(e=>e.P)?.T()});let b=0;(function f(h){let k=h-b;k>=
Ba&&(b=h-k%Ba,document.body.style.cursor=Qa,Qa="default",S.clearRect(0,0,J,K),c.U(),c.V(S),Ra.map(l=>l.V(S)),Xa.map(l=>{l.g+=l.H*k/1E3;l.g>l.s&&(l.g=l.s)}),Ma=void 0,ia.map(l=>{l.U();l.V(S)}),Sa.map(l=>{l.U(k)}),a(),gb());requestAnimationFrame(f)})(0)})};
