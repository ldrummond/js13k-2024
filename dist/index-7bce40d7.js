let h={avatar:{x:172,y:7,w:8,h:8},bone:{x:66,y:7,w:7,h:19},book1:{x:354,y:0,w:12,h:15},book2:{x:366,y:0,w:12,h:15},book3:{x:378,y:0,w:12,h:15},book4:{x:390,y:0,w:12,h:15},book5:{x:341,y:0,w:13,h:14},brain:{x:402,y:0,w:13,h:11},"character 0":{x:33,y:0,w:33,h:54},"character 1":{x:0,y:0,w:33,h:55},claw:{x:326,y:0,w:15,h:13},eye:{x:161,y:7,w:11,h:7},foot:{x:116,y:7,w:9,h:10},horn:{x:99,y:7,w:8,h:13},iconCoin:{x:125,y:7,w:9,h:9},iconHormones:{x:152,y:7,w:9,h:9},iconHorn:{x:143,y:7,w:9,h:9},iconMuted:{x:73,
y:7,w:13,h:9},iconPlaying:{x:86,y:7,w:13,h:9},iconScroll:{x:134,y:7,w:9,h:9},kidney:{x:107,y:7,w:9,h:11},lungs:{x:299,y:0,w:15,h:23},minion:{x:180,y:7,w:7,h:7},note:{x:187,y:7,w:7,h:4},pituitary:{x:415,y:0,w:5,h:5},tail:{x:276,y:0,w:23,h:15},textAlt:{x:66,y:0,w:210,h:7},violin:{x:314,y:0,w:12,h:21}};function aa(a){return Math.round(Math.random()*a)}function n(a,c=10){let [d,b,e]=a;return`hsl(${d+(Math.random()-.5)*c},${b+(Math.random()-.5)*c}%,${e+(Math.random()-.5)*c}%)`}
function v(a){let c=a.cloneNode(),d=c.getContext("2d");d.drawImage(a,0,0);d.imageSmoothingEnabled=!1;return[c,d]}function w(a,c,d,b){(1>a.width||1>a.height)&&console.log("Failed to replace color");a=c.getImageData(0,0,a.width,a.height);let e=a.data;for(let f=0;f<e.length;f+=4)e.slice(f,f+3)+""==d+""&&(e[f]=b[0],e[f+1]=b[1],e[f+2]=b[2]);c.putImageData(a,0,0)}
function x(a,c,d,b,e,f,g=12,k,l,m){m=m||y;b=Math.ceil(b/m);e=Math.ceil(e/m);let u=k||1;l=l?l||1:0;let p=!k;p&&(a.fillStyle=n(f,0),a.fillRect(c||0,d||0,Math.ceil((b+1)*m),Math.ceil((e+1)*m)));for(let q=0;q<=b;q++)for(let t=0;t<=e;t++){let A=q<=u||q>=b-u||t<=u||t>=e-u;var r=q>=l&&q<=b-l&&t>=l&&t<=e-l;if(p||A&&r){r=.75<Math.random();let z=g;k&&(z=r?g:0);if(r||k&&A)a.fillStyle=n(f,z),a.fillRect(q*m+c,t*m+d,m,m)}}}function ba(a,c,d){var b=h.eye;a.drawImage(B,b.x,b.y,b.w,b.h,100*y,20*y,c,d)}
function C(a){let [c,d]=v(D),b=a.w,e=a.h;c.width=b;c.height=e;d.drawImage(B,a.x,a.y,a.w,a.h,0,0,b,e);return[c,d]}function E(a){return ca.find(c=>c.name==a)}Array.prototype.i=0;Array.prototype.next=function(){this.i=(this.i+1)%this.length;return this[this.i]};
let da=[0,0,1],G=[2,2,22],ea=[9,70,20],fa=[8,65,15],ha=[164,38,5],ia=[0,0,28],ja=[51,97,31],ka=[20,20,20],na=[100,100,100],oa=[3,3,3],pa=[255,255,255],qa=[150,150,150],H=[155,132,2],ra=[93,52,52],sa=[180,49,67],ta=[140,40,54],ua=[111,39,50],va=1E3/30,xa=Math.sqrt(2),I=window.devicePixelRatio||1,ya=window.innerWidth,za=window.innerHeight,Aa=[392,329.63,293.66,246.94,220,196],B=document.createElement("img");B.src="spritesheet.png";
let Ba=12/9,[J,K]=ya/Ba>za?[za*Ba,za]:[ya,ya/Ba],y=J/300,L=3.5*K/24,Ca=21.75*K/24/y,M=(1*J/24+5)/y,Da=(25.5*J/24-M)/4/y,Ea=7*J/24,N=L+1.5*K/24,Fa=6.5*J/24,Ga=13*K/24,O=2.5*y,P={start:"See that little runt? He just turned 13 and is starting puberty.",encourage:"He needs a bit of a nudge. Click the brain to get his hormones pumping.",brain_clicked:"Nice! Look at him squirm. Get more hormones and grow that pituitary.",kidney:"Hmm not sure what that does.",violin0:"What is this novel form of torture!?",
violin1:"Agh! The agony!",violin2:"What horrible sounds!",violin3:"Where did you get this evil device!?",violin4:"No amount of practice will be enough!",studies:"Keep studying. The devil is in the details. He he"},D=document.createElement("canvas");D.width=ya;D.height=za;let [Ha,Ia]=v(D);Ha.id="loading";Ha.classList.add("fill");document.body.append(Ha);x(Ia,0,0,ya,za,da);let Q=document.createElement("div");Q.style.width=J+"px";Q.style.height=K+"px";Q.id="container";Q.innerHTML='<div id="text"></div><div id="footer"></div>';
document.body.prepend(Q);let [R,S]=v(D);R.id="main";Q.append(R);R.width=J*I;R.height=K*I;S.scale(I,I);S.imageSmoothingEnabled=!1;document.documentElement.style.fontSize=4*y+"px";let [Ja]=v(R);var Ka="",La=void 0,Ma=0,Oa=0,Pa=1,Qa="default",Ra=[],ca=[],Sa=[],T;
let Ta={name:"hormones",type:0,X:h.iconHormones,K:"{",g:100,s:100,G:0,Y:!1,Z:()=>!0},Ua={name:"confidence",type:2,X:h.iconCoin,K:"}",g:0,s:10,G:0,Y:!0,Z:()=>!1},Va={name:"maturity",type:1,X:h.iconHorn,K:"|",g:0,s:25,G:0,Y:!0,Z:()=>!1},Wa={name:"knowledge",type:3,X:h.iconScroll,K:"~",g:0,s:4,G:0,Y:!0,Z:()=>!1},Xa=[Ta,Va,Ua,Wa],U={[0]:Ta,[1]:Va,[2]:Ua,[3]:Wa};
class Ya{constructor(a,c,d,b){this.i=0;this.C=a;this.l=c;this.D=d;this.v=b;Sa.push(this)}T(a){0!=this.l&&(this.i+=a,a=Math.min(this.i/this.C,1),this.D&&this.D(a,this.l),this.i>=this.C&&(this.v&&this.v(this.l),this.l--,0!=this.l?this.i=0:this.cancel()))}cancel(){let a=Sa.indexOf(this);-1<a&&Sa.splice(a,1)}}
class cb{constructor(a){this.data={};let {id:c,x:d,y:b,w:e,W:f,m:g,ha:k,data:l}=a;this.id=c||aa(100)+"";this.data=l;let m=g[0];this.x=d*y;this.y=b*y;this.w=e*y;let u=this.w/m.w;this.i=m.h/m.w*this.w;this.D=g.map(p=>{let [r,q]=C(p);f&&(this.w*=2,this.w+=f*u,r.width*=2,r.width+=f);let t=p.x,A=p.y,z=p.w;p=p.h;a.W&&(q.drawImage(B,t,A,z,p,0,0,z,p),q.save(),q.scale(-1,1),q.translate(-r.width,0),q.drawImage(B,t,A,z,p,0,0,z,p),q.restore());return[r,q]}).map(p=>p[0]);this.P=this.D[0];k&&new Ya(k,-1,void 0,
()=>{this.P=this.D.next()})}U(a){a.drawImage(this.P,this.x,this.y,this.w,this.i)}}let db=Ja.getContext("2d",{ma:!0});db.scale(I,I);let eb=Ja.getBoundingClientRect();Ja.id="hitmask";Q.prepend(Ja);Ja.style.opacity="0";function fb(){let a=db.getImageData((Ma-eb.left)*I,(Oa-eb.top)*I,1,1).data;Ka=`rgb(${a[0]},${a[1]},${a[2]})`}
function gb(a){a.D.map(c=>{let [d,b]=v(c),e={};e.ja=c;b.globalCompositeOperation="source-over";b.fillStyle=a.fa;b.fillRect(0,0,a.w,a.i);b.globalCompositeOperation="destination-in";b.drawImage(c,0,0);var f=a.x,g=a.y,k=a.w,l=a.i;console.log("Add to hitmask");db.drawImage(d,f,g,k,l);eb=Ja.getBoundingClientRect();b.globalCompositeOperation="source-atop";b.drawImage(c,0,0);w(d,b,ra,ta);e.da=v(d)[0];w(d,b,ta,ua);e.ga=v(d)[0];w(d,b,ta,ra);w(d,b,ra,pa);b.fillStyle="rgba(0,0,0,0.5)";b.fillRect(0,0,a.w,a.i);
e.ka=v(d)[0];b.globalCompositeOperation="source-over";b.drawImage(c,0,0);b.globalCompositeOperation="source-atop";b.fillStyle="rgba(0,0,0,0.4)";b.fillRect(0,0,a.w,a.i);e.ca=v(d)[0];b.fillStyle="rgba(0,0,0,0.7)";b.fillRect(0,0,a.w,a.i);e.ia=v(d)[0];b.drawImage(c,0,0);w(d,b,ra,ta);b.fillStyle="rgba(255,200,200,0.6)";b.fillRect(0,0,a.w,a.i);e.ba=v(d)[0];w(d,b,ta,ra);b.clearRect(0,0,a.w,a.i);b.globalCompositeOperation="source-over";b.drawImage(c,0,0);a.$.push(e)})}
class hb extends cb{constructor(a){let {name:c,description:d,u:b,state:e,j:f,gain:g,B:k,S:l,F:m,V:u,o:p,L:r,hidden:q=!1}=a;super(p);this.$=[];this.I=this.aa=this.ea=0;this.R=this.L=this.l=this.O=this.C=!1;this.name=c;this.description=d;this.u=b;this.state=e;this.j=f;this.gain=g;"number"===typeof k&&0<k&&(this.B=k);this.J=l;this.F=m;this.V=u;this.o=p;this.fa=`rgb(${aa(255)},${aa(255)},${aa(255)})`;this.hidden=q;this.L=r;gb(this);this.H=this.$[0]}M(){0===this.state&&(this.state=1);this.R=!0;setTimeout(()=>
{this.R=!1},250)}T(){var a=Date.now();let c=this.fa===Ka;!this.O&&c&&(this.aa=a);this.O=c;let d=200<a-this.aa;c&&0!==this.state&&(Qa="pointer",d&&this.name&&(La=this));if(this.j){let b=!1;Object.entries(this.j).map(e=>{let [f,g]=e;g.g&&U[f].g<g.g&&(b=!0);g.A&&U[f].G<g.A&&(b=!0)});this.C=b}this.v&&this.u&&(this.ea=(a-this.v)/this.u,a=1<this.ea,5===this.state&&a&&(this.state=1))}S(){let a=this.B&&this.I>=this.B;this.l||5===this.state||a||(this.l=!0,this.J&&this.J(),setTimeout(()=>{this.l=!1},160),1!==
this.state||this.C||a||(this.I+=1,this.V&&this.V(),this.u&&(this.v=Date.now(),this.state=5),this.j&&Object.entries(this.j).map(c=>{let [d,b]=c;U[d].g-=b.g||0;U[d].G-=b.A||0}),this.gain&&Object.entries(this.gain).map(c=>{let [d,b]=c;c=U[d];let e=b.g||0,f=b.A||0,g=b.s||0;c.g+=e;c.G+=f;c.s+=g;T&&ib(c,e,f,g)}),this.F&&this.F()))}U(a){if(!this.hidden){var c=this.H.ja,d=this.y,b=this.i,e=c.width,f=c.height,g=this.B&&this.I>=this.B;0===this.state||this.L?c=this.H.ia:this.R?(console.log(this.name,"avail"),
c=this.H.ba):this.l&&5===this.state?(d+=2,c=this.H.ba):this.v&&this.u&&5===this.state?(a.drawImage(this.H.ca,this.x,d,this.w,b),g=Math.min((Date.now()-this.v-160)/(this.u-160),1),f*=g,b*=g):this.C&&!g?c=this.O?this.H.ka:this.H.ca:g?c=this.H.ga:this.O&&(c=this.H.da);this.O&&this.L&&(c=this.H.da);a.drawImage(c,0,0,e,f,this.x,d,this.w,b)}}}function jb(a){43==a&&(a=0);33==a&&(a=1);63==a&&(a=2);58==a&&(a=3);45<a&&58>a&&(a-=16);64<a&&91>a&&(a-=61);return a}
function kb(){var a=lb;console.log("Sprite Text Init Src: ",h.textAlt);let [c]=C(h.textAlt);console.log("Sprite Text Init: ",h.textAlt,c.width,c.height);a.i=c;a.P=C(h.iconHormones)[0];a.J=C(h.iconHorn)[0];a.v=C(h.iconCoin)[0];a.D=C(h.iconScroll)[0];a.C=C(h.eye)[0]}function mb(a,c){let d=""+c[0]+c[1]+c[2];if(a.l[d])return a.l[d];a.i?.width||console.log("Canvas not defined yet");let [b,e]=v(a.i);w(b,e,pa,c);return a.l[d]=b}
function V(a,c,d=0,b=0,e=10,f=.3,g,k,l){var m=lb;c=c.toUpperCase();d*=y;b*=y;e*=y;g=g?g*y:void 0;let u=f*e,p=0,r=0,q=1,t=m.i;k&&(t=mb(m,k));let A=Va.K.charCodeAt(0),z=Ua.K.charCodeAt(0),Y=Wa.K.charCodeAt(0),wb=[Ta.K.charCodeAt(0),A,z,Y,94],Na=0;c.split("").map((F,wa)=>{F=c.charCodeAt(wa);wa=32==F;let Za=46==F,xb=63==F;var la=58==F;let $a=wb.includes(F);if(33==F||Za||la||$a)p-=.85*u;let yb=5*jb(F),ab=d+p,bb=b+r*e*2.5,zb=e,Ab=7*e/5;la=()=>a.drawImage(t,yb,0,5,7,ab,bb,zb,Ab);if($a){let ma=m.P;F===A&&
m.J&&(ma=m.J);F===z&&m.v&&(ma=m.v);F===Y&&m.D&&(ma=m.D);94===F&&m.C&&(ma=m.C);ma&&(la=()=>{a.drawImage(ma,ab,bb-u,5.5*y,5.5*y)},p+=3*u)}wa&&(la=()=>{},p-=1.3*u,l&&(q-=l));p+=e+u;l?(q+=l,setTimeout(la,q)):la();g?wa&&p>g&&(Na+=p,p=0,r+=1):Na=p;l&&(xb||Za)&&(q+=5*l)});return Na}class nb{constructor(){this.i=document.createElement("canvas");this.l={}}}let lb=new nb;
function ib(a,c,d,b){var e=T;let f=M+12+Xa.indexOf(a)*Da,g=Ca-14,k="";c&&(k+="+"+c);d&&(k+=" +"+d+"/s");b&&(k+=" +"+b+"MAX");let l=f*y,m=(g-12)*y,u=60*y,p=20*y;new Ya(1E3,1,r=>{let q=-10*r;e.i.clearRect(l,m,u,p);V(e.i,k,f+5,g+q,4.5,void 0,void 0,H);e.i.globalCompositeOperation="destination-out";e.i.fillStyle=`rgba(0, 0, 0, ${r})`;e.i.fillRect(l,m,u,p);e.i.globalCompositeOperation="source-over"})}
function ob(a){let c=178*y,d=33*y,b=114*y;var e=La;a.i.clearRect(c,d,b,27*y);if(e){let f=e.name+"",g=f.match("evil eye"),k=e.I,l=e.B,m=e.j;e=e.gain;l&&(f+=": ");V(a.i,f,c/y+3,d/y+3,2.7,.3,void 0,qa);l&&V(a.i,k+"/"+l,(c+b)/y-20,d/y+3,2.7,.3,void 0,k===l?sa:H);let u=d/y+13,p=c/y+3;if(m||e){V(a.i,"COST: ",p,u,3,.2,void 0,qa);let r=0;Object.entries(m||[]).map(([q,t])=>{q=Xa[q];var A=q?.K;let z=t.g;t=t.A;let Y;z&&(Y=q.g>=z?H:sa,r+=V(a.i,`${z}${A} `,p+r,u+7,3,.2,void 0,Y)/y);t&&(A=`${(t+"").replace(/0(\.\d+)/,
"$1")}/s${A} `,Y=q.G>=t?H:sa,r+=V(a.i,A,p+r,u+7,3,.2,void 0,Y)/y)})}if(e){let r="";Object.entries(e).map(([q,t])=>{q=Xa[q]?.K;let A=t.g,z=t.A;t=t.s;A&&(r+=`+${A}${q}`);z&&(r+=`+${z}/s${q}`);t&&(r+=`+${t}${q}MAX`)});g&&(r="^evil eye");p+=60;V(a.i,"GAIN: ",p,u,3,.2,void 0,qa);V(a.i,r,p,u+7,3,.2,void 0,H)}}}
class pb{constructor(){this.v=!1;this.J=[];this.text="";document.getElementById("text");document.body.style.fontSize=J/64+"px";let [a,c]=v(R);a.id="ui";Q.insertBefore(a,R);c.scale(I,I);c.imageSmoothingEnabled=!1;this.i=c;let [d,b]=v(R);this.D=d;d.width=20;d.height=20;x(b,0,0,20,20,ja,10,void 0,void 0,1);let [e]=v(this.D);this.P=e;x(b,0,0,20,20,G,10,void 0,void 0,1);let [f,g]=v(this.D);this.C=f;this.C.width=20;this.C.height=20;this.l=g;ob(this)}N(a){console.log("minion",a,this.v);this.v?this.J.push(a):
(console.log("typing start"),this.v=!0,setTimeout(()=>{console.log("typing end");this.v=!1},50*a.length+800),this.i.clearRect(30*y,7*y,400*y,17*y),V(this.i,a,34,13,2.7,.3,void 0,H,50))}T(){if(0<this.J.length&&!this.v){console.log("next minion text");let a=this.J.shift()+"";this.N(a)}ob(this)}U(a){Xa.map((c,d)=>{var b=22*y,e=Ca*y,f=e-b/2,g=c.g/c.s;d=(M-6.2+d*Da)*y;let k=this.C.width,l=k/xa,m=.8*l;this.l.clearRect(0,0,20,20);let u=20*g;g*=k;this.l.drawImage(this.P,0,20-u,20,u,0,k-g,k,g);this.l.save();
this.l.globalCompositeOperation="destination-in";this.l.translate(k/2,k/2);this.l.rotate(.785);this.l.fillRect(-m/2,-m/2,m,m);this.l.globalCompositeOperation="destination-over";this.l.fillStyle="red";this.l.drawImage(this.D,-l/2,-l/2,l,l);this.l.restore();this.i.drawImage(this.C,d,f,b,b);this.l.globalCompositeOperation="source-over";f=Math.floor(c.g);g="/"+c.s;b="+"+Math.floor(10*c.G)/10;d/=y;d+=25;e=e/y-2.5;d+=V(a,f+"",d,e,4,.15,void 0,0<f?H:na)/y;d+=1;d+=V(a,g,d,e,4,.15,void 0,na)/y;"knowledge"!==
c.name&&(c=0<c.G?H:na,d+=V(a,b,d+3,e+2.2,2.5,.1,void 0,c)/y,V(a,"/s",d+3.3,e+3.2,1.7,.5,void 0,c))})}}
let qb=new AudioContext,rb={C_major:[261.63,329.63,392],G_major:[196,246.94,392],F_major:[174.61,220,349.23],A_minor:[220,261.63,329.63],D_minor:[293.66,349.23,440],B_diminished:[246.94,311.13,392],D_major:[146.83,185,220],E_major:[164.81,207.65,246.94],C_minor:[130.81,155.56,196],F_minor:[174.61,207.65,261.63],G7:[196,246.94,293.66],Cmaj7:[130.81,164.81,196],E_diminished:[164.81,207.65,246.94],G_minor:[196,233.08,293.66],ultra_low:[10,20.6,10],ultra_high:[4186.01,5274.04,6271.93]};
function sb(a,c,d,b){let e=qb.currentTime;a.map(f=>{let g=qb.createOscillator(),k=qb.createGain();g.type="sine";g.frequency.setValueAtTime(f,e);k.gain.setValueAtTime(d,e);k.gain.linearRampToValueAtTime(0,e+b);g.connect(k);k.connect(qb.destination);g.start(e);g.stop(e+c);g.onended=()=>{g.disconnect();k.disconnect()}})}function tb(){sb(rb.C_minor,2,.02,1)}let W=new AudioContext;
function ub(a){"suspended"===W.state&&W.resume();let c=.1*Pa,d=W.createOscillator();d.type="sawtooth";d.frequency.setValueAtTime(a,W.currentTime);a=W.createGain();a.gain.setValueAtTime(0,W.currentTime);a.gain.linearRampToValueAtTime(c,W.currentTime+.05);a.gain.exponentialRampToValueAtTime(.001,W.currentTime+1.5);d.connect(a);a.connect(W.destination);d.start(W.currentTime);d.stop(W.currentTime+1.5)}
function vb(){let [a,c]=v(R);Q.append(a);a.id="end";c.scale(I,I);c.imageSmoothingEnabled=!1;let d=a.height/I/10,b=51*y;new Ya(800,10,void 0,e=>{let f=10-e;0<f&&1<e&&x(c,0,d*(f-1),a.width,d*f,ea,10);1==e&&(ba(c,2*b,1.5*b),V(c,"Fear! A new demon has emerged from puberty and rises to torment the earth!",20,115,7,void 0,200,oa,70),setTimeout(()=>{V(c,"YOU WIN",125,200,6,void 0,200,oa)},5180))})}
let X=1*J/24/y,Z=L/y,Bb=(L+4.1*K/24)/y,Cb=(L+11.2*K/24)/y,Db=[{name:"evil eye",state:1,j:{[0]:{g:150},[1]:{g:50},[3]:{g:4}},gain:{},F(){sb(rb.E_diminished,5,.2,4);vb()},B:1,o:{x:X+25,y:Z+5,w:19,m:[h.eye]}},{name:"grow pituitary",u:2E3,state:1,j:{[0]:{g:60}},gain:{[0]:{A:.5,s:5}},F(){if(this.j){let a=this.j[0];a?.g&&(a.g*=1.5)}1==this.I&&(E("form kidney")?.M(),E("sharpen horns")?.M())},B:5,o:{x:X+30,y:Z+50,w:10,m:[h.pituitary]}},{name:"form kidney",u:2E3,state:0,j:{[0]:{g:100}},gain:{[0]:{s:10}},F(){if(this.j){let a=
this.j[0];a?.g&&(a.g+=10)}1==this.I&&T?.N(P.kidney)},B:2,o:{x:X+5,y:Z+72,w:16,m:[h.kidney]}},{name:"exercise brain",u:800,state:1,gain:{[0]:{g:8}},F(){1==this.I&&T?.N(P.brain_clicked)},o:{x:X+23,y:Z+27,w:23,m:[h.brain]}},{name:"lungs",u:4E3,state:0,j:{[0]:{g:30}},gain:{[1]:{g:1}},o:{x:X+24,y:Z+68,w:24,m:[h.lungs]}},{name:"fortify bones",u:1E4,state:0,j:{[1]:{g:20},[2]:{g:2}},gain:{[0]:{s:10},[1]:{s:5}},F(){if(this.j){var a=this.j[1];a?.g&&(a.g+=5);a=this.j[2];a?.g&&(a.g+=1)}},o:{x:X+53,y:Z+74,w:11.5,
m:[h.bone]}},{name:"grow claws",u:2E3,state:0,B:3,j:{[0]:{g:120,A:.1},[1]:{g:20}},gain:{[1]:{A:.5}},F(){1==this.I&&E("practice violin")?.M();if(this.j){let a=this.j[0],c=this.j[1];a?.A&&(a.A+=.1);c?.g&&(c.g+=5)}},o:{x:X+5,y:Z+49,w:20,W:17,m:[h.claw]}},{name:"sharpen horns",u:8E3,state:0,j:{[0]:{g:120}},gain:{[1]:{A:.2}},F(){1==this.I&&(E("grow claws")?.M(),E("shape hooves")?.M())},o:{x:X+4,y:Z+8,w:14,W:20,m:[h.horn]}},{name:"shape hooves",u:2E3,state:0,j:{[0]:{g:90},[1]:{g:25},[2]:{g:5}},gain:{[0]:{s:50},
[1]:{s:5}},B:2,F(){},o:{x:X+4,y:Z+129,w:17,W:15,m:[h.foot]}},{name:"tail",u:2E3,state:0,gain:{[1]:{A:1}},o:{x:X+4,y:Z+99,w:39,m:[h.tail]}}];Db.map(a=>{a.V=tb});let Eb=[],Fb=Array(6).fill(6).map(()=>aa(5));for(let a=0;6>a;a++){let c=a/6;for(let d=0;6>d;d++){let b=Aa[a];Eb.push({state:1,L:Fb[d]!==a,S(){ub(b);ca.map(e=>{e?.data?.c==d&&(e.L=!0)});this.L=!1;this.R=!0;setTimeout(()=>{this.R=!1},111)},o:{id:"note",x:213+d/6*70,y:Bb+(1+28*c),w:9,m:[h.note],data:{c:d,r:a,la:b}}})}}
let Gb=[{name:"practice violin",u:2400,state:0,j:{[1]:{A:.2,g:25}},gain:{[2]:{g:1}},F(){var a=[P.violin0,P.violin1,P.violin2,P.violin3,P.violin4];T?.N(a[Math.floor(Math.random()*a.length)]);let c=[];a=ca.filter(d=>d.id.match("note")&&!d.L);for(let d=0;6>d;d++){let b=a.find(e=>e?.data?.c==d);b&&c.push(b)}new Ya(400,6,void 0,d=>{(d=c[6-d])&&d.S()})},o:{x:180,y:Bb,w:25,m:[h.violin]}},...Eb],Hb=[{name:"codex gigas",state:1,B:1,j:{[0]:{g:150},[1]:{g:10},[2]:{g:5}},gain:{[0]:{A:2},[3]:{g:1}},F(){E("the black arts")?.M();
E("fortify bones")?.M();T?.N(P.studies)},o:{x:183,y:Cb,w:17,m:[h.book1]}},{name:"the black arts",state:0,B:1,j:{[0]:{g:200},[1]:{g:20},[2]:{g:10}},gain:{[2]:{A:.5}},o:{x:210,y:Cb,w:17,m:[h.book2]}},{name:"Dantes Inferno",B:1,state:0,gain:{[3]:{g:1}},o:{x:237,y:Cb,w:17,m:[h.book3]}},{name:"advice for a teenage devil",B:1,state:0,gain:{[3]:{g:1}},o:{x:263,y:Cb,w:19,m:[h.book5]}},{state:1,S(){Pa=1-Pa;this.H=this.$.next()},o:{x:275,y:11,w:10,m:[h.iconPlaying,h.iconMuted]}}],Ib=Ca-5,Jb=[{name:"Hormones",
state:1,o:{x:M+0*Da,y:Ib,w:10,m:[h.iconHormones]}},{name:"Maturity",state:1,o:{x:M+Da,y:Ib,w:10,m:[h.iconHorn]}},{name:"Confidence",state:1,o:{x:M+2*Da,y:Ib,w:10,m:[h.iconCoin]}},{name:"Knowledge",state:1,o:{x:M+3*Da,y:Ib,w:10,m:[h.iconScroll]}}],Kb=[...Db,...Gb,...Hb,...Jb],Lb=[{x:16,y:10,w:10,m:[h.minion]},{x:98,y:1.25*N/y,w:60,m:[h["character 0"],h["character 1"]],ha:2E3}];
function Mb(){let [a,c]=v(D);a.id="page-background";document.body.prepend(a);x(c,0,0,ya,za,da,10);let [d,b]=v(R);d.id="background";b.scale(I,I);Q.prepend(d);x(b,0,0,J,K,ha,8);var e=1*J/24,f=5.5*J/24,g=16*K/24;x(b,e,L,f,g,G,6);x(b,e,L,f,g,G,20,2);e=14*J/24;f=L+3.5*K/24;g=9*J/24;var k=6*K/24;x(b,e,f,g,k,G,8);x(b,e,f,g,k,ha,25,1,1);V(b,"The Band",1.22*e/y,.88*(f+k)/y,5,.83,void 0,ka);g=30*y;for(k=1;7>k;k++)b.fillStyle=n(da),b.fillRect(e+38*y,f+(10+k*g/6),67*y,y);e=14*J/24;f=L+10.25*K/24;g=9*J/24;k=5.75*
K/24;x(b,e,f,g,k,G,8);x(b,e,f,g,k,ha,25,1,1);V(b,"The Library",1.05*e/y,.91*(f+k)/y,5,.81,void 0,ka);x(b,Ea,N,Fa,Ga,fa);x(b,Ea+O,N+Ga-6*O,Fa-2*O,5.1*O,ia,20);x(b,Ea,N,Fa,Ga,G,5,2);x(b,Ea,N,Fa,Ga,ha,25,1,1);e=14*J/24;x(b,e,L,9*J/24,2.75*K/24,G,6);e+=6*y;f=L+9.5*y;k=100*y;g=Math.ceil(k/y);b.fillStyle=n(ha,0);b.fillRect(e,f,k,y);for(k=0;k<=g;k++).75<Math.random()&&(b.fillStyle=n(ha,12),b.fillRect(k*y+e,f,y,y))}B.onload=Nb;console.log("Load Spritesheet",B);
function Nb(){kb();Mb();console.log("Rendered Background");let a=new pb;T=a;setTimeout(()=>{V(Ia,"Infernal Adolescence",20,60,12,.12,void 0,sa,60)},100);Lb.map(b=>Ra.push(new cb(b)));Kb.map(b=>ca.push(new hb(b)));document.addEventListener("mousemove",b=>{Ma=b.x;Oa=b.y});console.log("After Initialized");document.getElementById("loading")?.remove();let c=document.getElementById("start");c.addEventListener("click",function(){console.log("Start Function");c.remove();Ia.fillStyle="red";new Ya(100,30,void 0,
e=>{Ia.clearRect(0,0,Ha.width,Ha.height*(1-e/30));1==e&&(T?.N(P.start),T?.N(P.encourage),Ha.remove())});window.addEventListener("click",()=>{ca.find(e=>e.O)?.S()});let b=0;(function g(f){let k=f-b;k>=va&&(b=f-k%va,document.body.style.cursor=Qa,Qa="default",S.clearRect(0,0,J,K),a.T(),a.U(S),Ra.map(l=>l.U(S)),Xa.map(l=>{l.g+=l.G*k/1E3;l.g>l.s&&(l.g=l.s)}),La=void 0,ca.map(l=>{l.T();l.U(S)}),Sa.map(l=>{l.T(k)}),S.fillStyle=d,S.globalCompositeOperation="darken",S.globalAlpha=.6,S.fillRect(Ea+O+2,N+O+
2,Fa-2*O,Ga-2*O),S.globalCompositeOperation="source-over",S.globalAlpha=1,fb());requestAnimationFrame(g)})(0)});let d=S.createLinearGradient(Ea+O,N+O,Fa-2*O,Ga-2*O);d.addColorStop(0,n(da,0));d.addColorStop(1,n(fa,0))};
