let h={avatar:{x:172,y:7,w:8,h:8},bone:{x:66,y:7,w:7,h:19},book1:{x:354,y:0,w:12,h:15},book2:{x:366,y:0,w:12,h:15},book3:{x:378,y:0,w:12,h:15},book4:{x:390,y:0,w:12,h:15},book5:{x:341,y:0,w:13,h:14},brain:{x:402,y:0,w:13,h:11},"character 0":{x:33,y:0,w:33,h:54},"character 1":{x:0,y:0,w:33,h:55},claw:{x:326,y:0,w:15,h:13},eye:{x:161,y:7,w:11,h:7},foot:{x:116,y:7,w:9,h:10},horn:{x:99,y:7,w:8,h:13},iconCoin:{x:125,y:7,w:9,h:9},iconHormones:{x:152,y:7,w:9,h:9},iconHorn:{x:143,y:7,w:9,h:9},iconMuted:{x:73,
y:7,w:13,h:9},iconPlaying:{x:86,y:7,w:13,h:9},iconScroll:{x:134,y:7,w:9,h:9},kidney:{x:107,y:7,w:9,h:11},lungs:{x:299,y:0,w:15,h:23},minion:{x:180,y:7,w:7,h:7},note:{x:187,y:7,w:7,h:4},pituitary:{x:415,y:0,w:5,h:5},tail:{x:276,y:0,w:23,h:15},textAlt:{x:66,y:0,w:210,h:7},violin:{x:314,y:0,w:12,h:21}};function aa(a){return Math.round(Math.random()*a)}function n(a,c=10){let [d,b,e]=a;return`hsl(${d+(Math.random()-.5)*c},${b+(Math.random()-.5)*c}%,${e+(Math.random()-.5)*c}%)`}
function v(a){let c=a.cloneNode(),d=c.getContext("2d");d.drawImage(a,0,0);d.imageSmoothingEnabled=!1;return[c,d]}function w(a,c,d,b){(1>a.width||1>a.height)&&console.log("Failed to replace color");a=c.getImageData(0,0,a.width,a.height);let e=a.data;for(let f=0;f<e.length;f+=4)e.slice(f,f+3)+""==d+""&&(e[f]=b[0],e[f+1]=b[1],e[f+2]=b[2]);c.putImageData(a,0,0)}
function x(a,c,d,b,e,f,g=12,k,l,m){m=m||y;b=Math.ceil(b/m);e=Math.ceil(e/m);let u=k||1;l=l?l||1:0;let p=!k;p&&(a.fillStyle=n(f,0),a.fillRect(c||0,d||0,Math.ceil((b+1)*m),Math.ceil((e+1)*m)));for(let q=0;q<=b;q++)for(let t=0;t<=e;t++){let B=q<=u||q>=b-u||t<=u||t>=e-u;var r=q>=l&&q<=b-l&&t>=l&&t<=e-l;if(p||B&&r){r=.75<Math.random();let z=g;k&&(z=r?g:0);if(r||k&&B)a.fillStyle=n(f,z),a.fillRect(q*m+c,t*m+d,m,m)}}}function ba(a,c,d){var b=h.eye;a.drawImage(A,b.x,b.y,b.w,b.h,100*y,20*y,c,d)}
function C(a){let [c,d]=v(ca),b=a.w,e=a.h;c.width=b;c.height=e;d.drawImage(A,a.x,a.y,a.w,a.h,0,0,b,e);return[c,d]}function D(a){return da.find(c=>c.name==a)}Array.prototype.i=0;Array.prototype.next=function(){this.i=(this.i+1)%this.length;return this[this.i]};
let ea=[0,0,1],E=[2,2,22],fa=[9,70,20],ha=[8,65,15],ia=[164,38,5],ja=[0,0,28],ka=[51,97,31],na=[20,20,20],oa=[100,100,100],pa=[3,3,3],qa=[255,255,255],ra=[150,150,150],F=[155,132,2],sa=[93,52,52],ta=[180,49,67],ua=[140,40,54],va=[111,39,50],wa=1E3/30,xa=Math.sqrt(2),G=window.devicePixelRatio||1,za=window.innerWidth,Aa=window.innerHeight,Ba=[392,329.63,293.66,246.94,220,196],A=document.createElement("img");A.src="spritesheet.png";
let Ca=12/9,[H,J]=za/Ca>Aa?[Aa*Ca,Aa]:[za,za/Ca],y=H/300,K=3.5*J/24,Da=21.75*J/24/y,L=(1*H/24+5)/y,Ea=(25.5*H/24-L)/4/y,Fa=7*H/24,M=K+1.5*J/24,Ga=6.5*H/24,Ha=13*J/24,N=2.5*y,O={start:"See that little runt? He just turned 13 and is starting puberty.",encourage:"He needs a bit of a nudge. Click the brain to get the hormones pumping.",brain_clicked:"Nice! Look at him squirm. Get more hormones and grow the pituitary.",jerk:"Hehe what a jerk. They grow up so fast",claws:"Be careful! Those things are sharp.",
kidney:"Hmm not sure what that does.",violin0:"What is this novel form of torture!?",violin1:"Agh! The agony!",violin2:"What horrible sounds!",violin3:"Where did you get this evil device!?",violin4:"No amount of practice will be enough!",studies:"Keep studying. The devil is in the details. Hehe",advice:"Every devil keeps that in their back pocket."},ca=document.createElement("canvas");ca.width=za;ca.height=Aa;let [Ia,Ja]=v(ca);Ia.id="loading";Ia.classList.add("fill");document.body.append(Ia);
x(Ja,0,0,za,Aa,ea);let P=document.createElement("div");P.style.width=H+"px";P.style.height=J+"px";P.id="container";P.innerHTML='<div id="text"></div><div id="footer"></div>';document.body.prepend(P);let [Q,R]=v(ca);Q.id="main";P.append(Q);Q.width=H*G;Q.height=J*G;R.scale(G,G);R.imageSmoothingEnabled=!1;document.documentElement.style.fontSize=4*y+"px";let [S]=v(Q);var Ka="",La=void 0,Ma=0,Oa=0,Pa=1,Qa="default",Ra=[],da=[],Sa=[],T;
let Ta={name:"hormones",type:0,Y:h.iconHormones,M:"{",g:40,s:100,H:0,Z:!1,$:()=>!0},Ua={name:"confidence",type:2,Y:h.iconCoin,M:"}",g:0,s:10,H:0,Z:!0,$:()=>!1},Va={name:"maturity",type:1,Y:h.iconHorn,M:"|",g:0,s:25,H:0,Z:!0,$:()=>!1},Wa={name:"knowledge",type:3,Y:h.iconScroll,M:"~",g:0,s:5,H:0,Z:!0,$:()=>!1},Xa=[Ta,Va,Ua,Wa],U={[0]:Ta,[1]:Va,[2]:Ua,[3]:Wa};
class Ya{constructor(a,c,d,b){this.i=0;this.D=a;this.l=c;this.F=d;this.u=b;Sa.push(this)}U(a){0!=this.l&&(this.i+=a,a=Math.min(this.i/this.D,1),this.F&&this.F(a,this.l),this.i>=this.D&&(this.u&&this.u(this.l),this.l--,0!=this.l?this.i=0:this.cancel()))}cancel(){let a=Sa.indexOf(this);-1<a&&Sa.splice(a,1)}}
class Za{constructor(a){this.data={};let {id:c,x:d,y:b,w:e,W:f,m:g,ha:k,data:l}=a;this.id=c||aa(100)+"";this.data=l;let m=g[0];this.x=d*y;this.y=b*y;this.w=e*y;let u=this.w/m.w;this.i=m.h/m.w*this.w;this.F=g.map(p=>{let [r,q]=C(p);f&&(this.w*=2,this.w+=f*u,r.width*=2,r.width+=f);let t=p.x,B=p.y,z=p.w;p=p.h;a.W&&(q.drawImage(A,t,B,z,p,0,0,z,p),q.save(),q.scale(-1,1),q.translate(-r.width,0),q.drawImage(A,t,B,z,p,0,0,z,p),q.restore());return[r,q]}).map(p=>p[0]);this.O=this.F[0];k&&new Ya(k,-1,void 0,
()=>{this.O=this.F.next()})}V(a){a.drawImage(this.O,this.x,this.y,this.w,this.i)}}let $a=S.getContext("2d",{ma:!0});$a.scale(G,G);let eb=S.getBoundingClientRect();window.addEventListener("resize",()=>{eb=S.getBoundingClientRect()});S.id="hitmask";P.prepend(S);S.style.opacity="0";function fb(){let a=$a.getImageData((Ma-eb.left)*G,(Oa-eb.top)*G,1,1).data;Ka=`rgb(${a[0]},${a[1]},${a[2]})`}
function gb(a){a.F.map(c=>{let [d,b]=v(c),e={};e.ja=c;b.globalCompositeOperation="source-over";b.fillStyle=a.fa;b.fillRect(0,0,a.w,a.i);b.globalCompositeOperation="destination-in";b.drawImage(c,0,0);var f=a.x,g=a.y,k=a.w,l=a.i;console.log("Add to hitmask");$a.drawImage(d,f,g,k,l);eb=S.getBoundingClientRect();b.globalCompositeOperation="source-atop";b.drawImage(c,0,0);w(d,b,sa,ua);e.ea=v(d)[0];w(d,b,ua,va);e.ga=v(d)[0];w(d,b,ua,sa);w(d,b,sa,qa);b.fillStyle="rgba(0,0,0,0.5)";b.fillRect(0,0,a.w,a.i);
e.ka=v(d)[0];b.globalCompositeOperation="source-over";b.drawImage(c,0,0);b.globalCompositeOperation="source-atop";b.fillStyle="rgba(0,0,0,0.4)";b.fillRect(0,0,a.w,a.i);e.da=v(d)[0];b.fillStyle="rgba(0,0,0,0.7)";b.fillRect(0,0,a.w,a.i);e.ia=v(d)[0];b.drawImage(c,0,0);w(d,b,sa,ua);b.fillStyle="rgba(255,200,200,0.6)";b.fillRect(0,0,a.w,a.i);e.ca=v(d)[0];w(d,b,ua,sa);b.clearRect(0,0,a.w,a.i);b.globalCompositeOperation="source-over";b.drawImage(c,0,0);a.aa.push(e)})}
class hb extends Za{constructor(a){let {name:c,description:d,B:b,state:e,j:f,gain:g,A:k,T:l,C:m,S:u,o:p,N:r,hidden:q=!1}=a;super(p);this.aa=[];this.J=this.ba=this.X=0;this.R=this.N=this.l=this.P=this.D=!1;this.name=c;this.description=d;this.B=b;this.state=e;this.j=f;this.gain=g;"number"===typeof k&&0<k&&(this.A=k);this.L=l;this.C=m;this.S=u;this.o=p;this.fa=`rgb(${aa(255)},${aa(255)},${aa(255)})`;this.hidden=q;this.N=r;gb(this);this.I=this.aa[0]}G(){0===this.state&&(this.state=1);this.R=!0;setTimeout(()=>
{this.R=!1},250)}U(){var a=Date.now();let c=this.fa===Ka;!this.P&&c&&(this.ba=a);this.P=c;let d=200<a-this.ba;c&&0!==this.state&&(Qa="pointer",d&&this.name&&(La=this));if(this.j){let b=!1;Object.entries(this.j).map(e=>{let [f,g]=e;g.g&&U[f].g<g.g&&(b=!0);g.v&&U[f].H<g.v&&(b=!0)});this.D=b}this.u&&this.B&&(this.X=(a-this.u)/this.B,a=1<this.X,5===this.state&&a&&(this.state=1))}T(){let a=this.A&&this.J>=this.A;this.l||5===this.state||a||(this.l=!0,this.L&&this.L(),setTimeout(()=>{this.l=!1},160),1!==
this.state||this.D||a||(this.J+=1,this.S&&this.S(),this.B&&(this.u=Date.now(),this.state=5),this.j&&Object.entries(this.j).map(c=>{let [d,b]=c;U[d].g-=b.g||0;U[d].H-=b.v||0}),this.gain&&Object.entries(this.gain).map(c=>{let [d,b]=c;c=U[d];let e=b.g||0,f=b.v||0,g=b.s||0;c.g+=e;c.g=Math.min(c.g,c.s);c.H+=f;c.s+=g;T&&ib(c,e,f,g)}),this.C&&this.C()))}V(a){if(!this.hidden){var c=this.I.ja,d=this.y,b=this.i,e=c.width,f=c.height,g=this.A&&this.J>=this.A;0===this.state||this.N?c=this.I.ia:this.R?(console.log(this.name,
"avail"),c=this.I.ca):this.l&&5===this.state?(d+=2,c=this.I.ca):this.u&&this.B&&5===this.state?(a.drawImage(this.I.da,this.x,d,this.w,b),g=Math.min((Date.now()-this.u-160)/(this.B-160),1),f*=g,b*=g):this.D&&!g?c=this.P?this.I.ka:this.I.da:g?c=this.I.ga:this.P&&(c=this.I.ea);this.P&&this.N&&(c=this.I.ea);a.drawImage(c,0,0,e,f,this.x,d,this.w,b)}}}function jb(a){43==a&&(a=0);33==a&&(a=1);63==a&&(a=2);58==a&&(a=3);45<a&&58>a&&(a-=16);64<a&&91>a&&(a-=61);return a}
function kb(){var a=lb;console.log("Sprite Text Init Src: ",h.textAlt);let [c]=C(h.textAlt);console.log("Sprite Text Init: ",h.textAlt,c.width,c.height);a.i=c;a.O=C(h.iconHormones)[0];a.L=C(h.iconHorn)[0];a.u=C(h.iconCoin)[0];a.F=C(h.iconScroll)[0];a.D=C(h.eye)[0]}function mb(a,c){let d=""+c[0]+c[1]+c[2];if(a.l[d])return a.l[d];a.i?.width||console.log("Canvas not defined yet");let [b,e]=v(a.i);w(b,e,qa,c);return a.l[d]=b}
function V(a,c,d=0,b=0,e=10,f=.3,g,k,l){var m=lb;c=c.toUpperCase();d*=y;b*=y;e*=y;g=g?g*y:void 0;let u=f*e,p=0,r=0,q=1,t=m.i;k&&(t=mb(m,k));let B=Va.M.charCodeAt(0),z=Ua.M.charCodeAt(0),Z=Wa.M.charCodeAt(0),xb=[Ta.M.charCodeAt(0),B,z,Z,94],Na=0;c.split("").map((I,ya)=>{I=c.charCodeAt(ya);ya=32==I;let ab=46==I,yb=63==I;var la=58==I;let bb=xb.includes(I);if(33==I||ab||la||bb)p-=.85*u;let zb=5*jb(I),cb=d+p,db=b+r*e*2.5,Ab=e,Bb=7*e/5;la=()=>a.drawImage(t,zb,0,5,7,cb,db,Ab,Bb);if(bb){let ma=m.O;I===B&&
m.L&&(ma=m.L);I===z&&m.u&&(ma=m.u);I===Z&&m.F&&(ma=m.F);94===I&&m.D&&(ma=m.D);ma&&(la=()=>{a.drawImage(ma,cb,db-u,5.5*y,5.5*y)},p+=3*u)}ya&&(la=()=>{},p-=1.3*u,l&&(q-=l));p+=e+u;l?(q+=l,setTimeout(la,q)):la();g?ya&&p>g&&(Na+=p,p=0,r+=1):Na=p;l&&(yb||ab)&&(q+=5*l)});return Na}class nb{constructor(){this.i=document.createElement("canvas");this.l={}}}let lb=new nb;
function ib(a,c,d,b){var e=T;let f=L+12+Xa.indexOf(a)*Ea,g=Da-14,k="";c&&(k+="+"+c);d&&(k+=" +"+d+"/s");b&&(k+=" +"+b+"MAX");let l=f*y,m=(g-12)*y,u=150*y,p=25*y;new Ya(1E3,1,r=>{let q=-10*r;e.u.clearRect(l,m,u,p);V(e.u,k,f+5,g+q,4.3,void 0,void 0,F);e.u.globalCompositeOperation="destination-out";e.u.fillStyle=`rgba(0, 0, 0, ${r})`;e.u.fillRect(l,m,u,p);e.u.globalCompositeOperation="source-over"})}
function ob(a){let c=178*y,d=33*y,b=114*y;var e=La;a.l.clearRect(c,d,b,27*y);if(e){let f=e.name+"",g=f.match("evil eye"),k=e.J,l=e.A,m=e.j;e=e.gain;l&&(f+=": ");V(a.l,f,c/y+3,d/y+3,2.7,.3,void 0,ra);l&&V(a.l,k+"/"+l,(c+b)/y-20,d/y+3,2.7,.3,void 0,k===l?ta:F);let u=d/y+13,p=c/y+3;if(m||e){V(a.l,"COST: ",p,u,3,.2,void 0,ra);let r=0;Object.entries(m||[]).map(([q,t])=>{q=Xa[q];var B=q?.M;let z=t.g&&Math.round(t.g);t=t.v;let Z;z&&(Z=q.g>=z?F:ta,r+=V(a.l,`${z}${B} `,p+r,u+7,3,.2,void 0,Z)/y);t&&(B=`${(t.toFixed(1)+
"").replace(/0(\.\d+)/,"$1")}/s${B} `,Z=q.H>=t?F:ta,r+=V(a.l,B,p+r,u+7,3,.2,void 0,Z)/y)})}if(e){let r="";Object.entries(e).map(([q,t])=>{q=Xa[q]?.M;let B=t.g,z=t.v;t=t.s;B&&(r+=`+${B}${q}`);z&&(r+=`+${(z.toFixed(1)+"").replace(/0(\.\d+)/,"$1")}/s${q}`);t&&(r+=`+${t}${q}MAX`)});g&&(r="^ evil eye");p+=60;V(a.l,"GAIN: ",p,u,3,.2,void 0,ra);V(a.l,r,p,u+7,3,.2,void 0,F)}}}
class pb{constructor(){this.D=!1;this.O=[];this.text="";document.getElementById("text");document.body.style.fontSize=H/64+"px";let [a,c]=v(Q);a.id="ui";P.insertBefore(a,Q);c.scale(G,G);c.imageSmoothingEnabled=!1;this.l=c;let [d,b]=v(Q);P.append(d);b.scale(G,G);b.imageSmoothingEnabled=!1;this.u=b;let [e,f]=v(Q);this.L=e;e.width=20;e.height=20;x(f,0,0,20,20,ka,10,void 0,void 0,1);let [g]=v(this.L);this.X=g;x(f,0,0,20,20,E,10,void 0,void 0,1);let [k,l]=v(this.L);this.F=k;this.F.width=20;this.F.height=
20;this.i=l;ob(this)}K(a){console.log("minion",a,this.D);this.D?this.O.push(a):(console.log("typing start"),this.D=!0,setTimeout(()=>{console.log("typing end");this.D=!1},50*a.length+800),this.l.clearRect(30*y,7*y,400*y,17*y),V(this.l,a,34,13,2.7,.3,void 0,F,50))}U(){if(0<this.O.length&&!this.D){console.log("next minion text");let a=this.O.shift()+"";this.K(a)}ob(this)}V(a){Xa.map((c,d)=>{var b=22*y,e=Da*y,f=e-b/2,g=c.g/c.s;d=(L-6.2+d*Ea)*y;let k=this.F.width,l=k/xa,m=.8*l;this.i.clearRect(0,0,20,
20);let u=20*g;g*=k;this.i.drawImage(this.X,0,20-u,20,u,0,k-g,k,g);this.i.save();this.i.globalCompositeOperation="destination-in";this.i.translate(k/2,k/2);this.i.rotate(.785);this.i.fillRect(-m/2,-m/2,m,m);this.i.globalCompositeOperation="destination-over";this.i.fillStyle="red";this.i.drawImage(this.L,-l/2,-l/2,l,l);this.i.restore();this.l.drawImage(this.F,d,f,b,b);this.i.globalCompositeOperation="source-over";f=Math.floor(c.g);g="/"+c.s;b="+"+Math.floor(10*c.H)/10;d/=y;d+=25;e=e/y-2.5;d+=V(a,f+
"",d,e,4,.15,void 0,0<f?F:oa)/y;d+=1;d+=V(a,g,d,e,4,.15,void 0,oa)/y;"knowledge"!==c.name&&(c=0<c.H?F:oa,d+=V(a,b,d+3,e+2.2,2.5,.1,void 0,c)/y,V(a,"/s",d+3.3,e+3.2,1.7,.5,void 0,c))})}}
let qb=new AudioContext,rb={C_major:[261.63,329.63,392],G_major:[196,246.94,392],F_major:[174.61,220,349.23],A_minor:[220,261.63,329.63],D_minor:[293.66,349.23,440],B_diminished:[246.94,311.13,392],D_major:[146.83,185,220],E_major:[164.81,207.65,246.94],C_minor:[130.81,155.56,196],F_minor:[174.61,207.65,261.63],G7:[196,246.94,293.66],Cmaj7:[130.81,164.81,196],E_diminished:[164.81,207.65,246.94],G_minor:[196,233.08,293.66],ultra_low:[10,20.6,10],ultra_high:[4186.01,5274.04,6271.93]};
function sb(a,c,d,b){let e=qb.currentTime;a.map(f=>{let g=qb.createOscillator(),k=qb.createGain();g.type="sine";g.frequency.setValueAtTime(f,e);k.gain.setValueAtTime(d,e);k.gain.linearRampToValueAtTime(0,e+b);g.connect(k);k.connect(qb.destination);g.start(e);g.stop(e+c);g.onended=()=>{g.disconnect();k.disconnect()}})}function tb(){sb(rb.C_minor,2,.02,1)}function ub(){sb(rb.E_diminished,1,.01,1)}let W=new AudioContext;
function vb(a){"suspended"===W.state&&W.resume();let c=.09*Pa,d=W.createOscillator();d.type="sawtooth";d.frequency.setValueAtTime(a,W.currentTime);a=W.createGain();a.gain.setValueAtTime(0,W.currentTime);a.gain.linearRampToValueAtTime(c,W.currentTime+.05);a.gain.exponentialRampToValueAtTime(.001,W.currentTime+1.5);d.connect(a);a.connect(W.destination);d.start(W.currentTime);d.stop(W.currentTime+1.5)}
function wb(){let [a,c]=v(Q);P.append(a);a.id="end";c.scale(G,G);c.imageSmoothingEnabled=!1;let d=a.height/G/10,b=51*y;new Ya(800,10,void 0,e=>{let f=10-e;0<f&&1<e&&x(c,0,d*(f-1),a.width,d*f,fa,10);1==e&&(ba(c,2*b,1.5*b),V(c,"Fear! A new demon has emerged from puberty and risen to torment the earth!",20,115,7,void 0,200,pa,70),setTimeout(()=>{V(c,"YOU WIN: AND WE LOSE",100,200,6,void 0,200,pa)},5180))})}
let X=1*H/24/y,Y=K/y,Cb=(K+4.1*J/24)/y,Db=(K+11.2*J/24)/y,Eb=[{name:"evil eye",state:1,j:{[0]:{g:300},[1]:{g:60},[2]:{g:25},[3]:{g:5}},gain:{},C(){sb(rb.E_diminished,5,.03,4);wb()},A:1,o:{x:X+25,y:Y+5,w:19,m:[h.eye]}},{name:"grow pituitary",B:2E3,state:1,j:{[0]:{g:60}},gain:{[0]:{v:.5,s:5}},C(){if(this.j){let a=this.j[0];a?.g&&(a.g+=35)}1==this.J&&(T?.K(O.jerk),D("form kidney")?.G(),D("sharpen horns")?.G())},A:5,o:{x:X+30,y:Y+50,w:10,m:[h.pituitary]}},{name:"form kidney",B:2E3,state:0,j:{[0]:{g:100}},
gain:{[0]:{s:10}},C(){if(this.j){let a=this.j[0];a?.g&&(a.g+=10)}1==this.J&&T?.K(O.kidney)},A:2,o:{x:X+5,y:Y+72,w:16,m:[h.kidney]}},{name:"exercise brain",B:800,state:1,gain:{[0]:{g:800}},C(){1==this.J&&T?.K(O.brain_clicked)},o:{x:X+23,y:Y+27,w:23,m:[h.brain]}},{name:"lungs",B:1E3,state:0,j:{[0]:{g:50}},gain:{[1]:{g:2},[2]:{g:.5}},o:{x:X+24,y:Y+68,w:24,m:[h.lungs]}},{name:"growth spurt",B:12E3,A:6,state:0,j:{[1]:{g:20},[2]:{g:2}},gain:{[0]:{s:10},[1]:{s:5}},C(){if(this.j){var a=this.j[1];a?.g&&(a.g+=
5);a=this.j[2];a?.g&&(a.g+=2)}},o:{x:X+53,y:Y+74,w:11.5,m:[h.bone]}},{name:"grow claws",B:2E3,state:0,A:3,j:{[0]:{g:120,v:.1},[1]:{g:20}},gain:{[1]:{v:.6}},C(){1==this.J&&(T?.K(O.claws),D("practice violin")?.G());if(this.j){let a=this.j[0],c=this.j[1];a?.v&&(a.v+=.1);c?.g&&(c.g+=5)}},o:{x:X+5,y:Y+49,w:20,W:17,m:[h.claw]}},{name:"sharpen horns",B:5E3,state:0,j:{[0]:{g:120}},gain:{[1]:{v:.2}},C(){1==this.J&&(D("grow claws")?.G(),D("shape hooves")?.G())},o:{x:X+4,y:Y+8,w:14,W:20,m:[h.horn]}},{name:"shape hooves",
B:2E3,state:0,j:{[0]:{g:90},[1]:{g:25},[2]:{g:5}},gain:{[0]:{s:50},[1]:{s:5}},A:2,C(){},o:{x:X+4,y:Y+129,w:17,W:15,m:[h.foot]}},{name:"grow tail",B:9E3,state:0,A:3,j:{[0]:{g:200},[1]:{v:.5},[2]:{g:5}},gain:{[2]:{v:.1,s:2}},o:{x:X+4,y:Y+99,w:39,m:[h.tail]}}];Eb.map(a=>{a.S=tb});let Fb=[],Gb=Array(6).fill(6).map(()=>aa(5));
for(let a=0;6>a;a++){let c=a/6;for(let d=0;6>d;d++){let b=Ba[a];Fb.push({state:1,N:Gb[d]!==a,T(){vb(b);da.map(e=>{e?.data?.c==d&&(e.N=!0)});this.N=!1;this.R=!0;setTimeout(()=>{this.R=!1},111)},o:{id:"note",x:213+d/6*70,y:Cb+(1+28*c),w:9,m:[h.note],data:{c:d,r:a,la:b}}})}}
let Hb=[{name:"practice violin",B:2400,state:0,j:{[0]:{g:50},[1]:{v:.2,g:25}},gain:{[2]:{g:1}},C(){var a=[O.violin0,O.violin1,O.violin2,O.violin3,O.violin4];T?.K(a[Math.floor(Math.random()*a.length)]);let c=[];a=da.filter(d=>d.id.match("note")&&!d.N);for(let d=0;6>d;d++){let b=a.find(e=>e?.data?.c==d);b&&c.push(b)}new Ya(400,6,void 0,d=>{(d=c[6-d])&&d.T()})},o:{x:180,y:Cb,w:25,m:[h.violin]}},...Fb],Ib=[{name:"codex gigas",state:1,A:1,j:{[0]:{g:150},[1]:{g:15},[2]:{g:5}},gain:{[0]:{v:2},[3]:{g:1}},
C(){D("lungs")?.G();D("the black arts")?.G();D("growth spurt")?.G();T?.K(O.studies)},o:{x:183,y:Db,w:17,m:[h.book1]}},{name:"the black arts",state:0,A:1,j:{[0]:{g:220},[1]:{g:30},[2]:{g:6}},gain:{[2]:{v:.2},[3]:{g:2}},C(){D("dantes inferno")?.G();D("grow tail")?.G()},o:{x:210,y:Db,w:17,m:[h.book2]}},{name:"dantes inferno",A:1,state:0,j:{[0]:{g:200},[1]:{g:30},[2]:{g:15}},gain:{[2]:{s:10},[3]:{g:1}},C(){D("advice for a teenage devil")?.G()},o:{x:237,y:Db,w:17,m:[h.book3]}},{name:"advice for a teenage devil",
A:1,state:0,j:{[0]:{g:300},[1]:{g:50},[2]:{g:25}},gain:{[3]:{g:2}},C(){D("evil eye")?.G();T?.K(O.advice)},o:{x:263,y:Db,w:19,m:[h.book5]}},{name:"MUTE",state:1,T(){Pa=1-Pa;this.I=this.aa.next();0===Pa?this.name="UNMUTE":this.name="MUTE"},o:{x:275,y:11,w:10,m:[h.iconPlaying,h.iconMuted]}}];Ib.map(a=>{a.S=ub});
let Jb=Da-5,Kb=[{name:"Hormones",state:1,o:{x:L+0*Ea,y:Jb,w:10,m:[h.iconHormones]}},{name:"Maturity",state:1,o:{x:L+Ea,y:Jb,w:10,m:[h.iconHorn]}},{name:"Confidence",state:1,o:{x:L+2*Ea,y:Jb,w:10,m:[h.iconCoin]}},{name:"Knowledge",state:1,o:{x:L+3*Ea,y:Jb,w:10,m:[h.iconScroll]}}],Lb=[...Eb,...Hb,...Ib,...Kb],Mb=[{x:16,y:10,w:10,m:[h.minion]},{x:98,y:1.25*M/y,w:60,m:[h["character 0"],h["character 1"]],ha:2E3}];
function Nb(){let [a,c]=v(ca);a.id="page-background";document.body.prepend(a);x(c,0,0,za,Aa,ea,10);let [d,b]=v(Q);d.id="background";b.scale(G,G);P.prepend(d);x(b,0,0,H,J,ia,8);var e=1*H/24,f=5.5*H/24,g=16*J/24;x(b,e,K,f,g,E,6);x(b,e,K,f,g,E,20,2);e=14*H/24;f=K+3.5*J/24;g=9*H/24;var k=6*J/24;x(b,e,f,g,k,E,8);x(b,e,f,g,k,ia,25,1,1);V(b,"The Band",1.22*e/y,.88*(f+k)/y,5,.83,void 0,na);g=30*y;for(k=1;7>k;k++)b.fillStyle=n(ea),b.fillRect(e+38*y,f+(10+k*g/6),67*y,y);e=14*H/24;f=K+10.25*J/24;g=9*H/24;k=
5.75*J/24;x(b,e,f,g,k,E,8);x(b,e,f,g,k,ia,25,1,1);V(b,"The Library",1.05*e/y,.91*(f+k)/y,5,.81,void 0,na);x(b,Fa,M,Ga,Ha,ha);x(b,Fa+N,M+Ha-6*N,Ga-2*N,5.1*N,ja,20);x(b,Fa,M,Ga,Ha,E,5,2);x(b,Fa,M,Ga,Ha,ia,25,1,1);e=14*H/24;x(b,e,K,9*H/24,2.75*J/24,E,6);e+=6*y;f=K+9.5*y;k=100*y;g=Math.ceil(k/y);b.fillStyle=n(ia,0);b.fillRect(e,f,k,y);for(k=0;k<=g;k++).75<Math.random()&&(b.fillStyle=n(ia,12),b.fillRect(k*y+e,f,y,y))}A.onload=Ob;console.log("Load Spritesheet",A);
function Ob(){kb();Nb();console.log("Rendered Background");let a=new pb;T=a;Mb.map(b=>Ra.push(new Za(b)));Lb.map(b=>da.push(new hb(b)));document.addEventListener("mousemove",b=>{Ma=b.x;Oa=b.y});console.log("After Initialized");document.getElementById("loading")?.remove();let c=document.getElementById("start");setTimeout(()=>{V(Ja,"Infernal Adolescence",28,60,12,.12,void 0,ta,60);c.style.opacity="1"},100);c.addEventListener("click",function(){console.log("Start Function");c.remove();Ja.fillStyle="red";
new Ya(100,30,void 0,e=>{Ja.clearRect(0,0,Ia.width,Ia.height*(1-e/30));1==e&&(T?.K(O.start),T?.K(O.encourage),Ia.remove())});window.addEventListener("click",()=>{da.find(e=>e.P)?.T()});let b=0;(function g(f){let k=f-b;k>=wa&&(b=f-k%wa,document.body.style.cursor=Qa,Qa="default",R.clearRect(0,0,H,J),a.U(),a.V(R),Ra.map(l=>l.V(R)),Xa.map(l=>{l.g+=l.H*k/1E3;l.g>l.s&&(l.g=l.s)}),La=void 0,da.map(l=>{l.U();l.V(R)}),Sa.map(l=>{l.U(k)}),R.fillStyle=d,R.globalCompositeOperation="darken",R.globalAlpha=.5,R.fillRect(Fa+
N+2,M+N+2,Ga-2*N,Ha-2*N),R.globalCompositeOperation="source-over",R.globalAlpha=1,fb());requestAnimationFrame(g)})(0)});let d=R.createLinearGradient(Fa+N,M+N,Ga-2*N,Ha-2*N);d.addColorStop(0,n(ea,0));d.addColorStop(1,n(ha,0))};
